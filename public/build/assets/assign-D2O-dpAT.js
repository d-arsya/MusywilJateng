import{r as d,j as e,a as q}from"./app-Cfcux9LY.js";import{A as Q}from"./admin-DEMl_BeJ.js";import{A as V}from"./avatar.esm-d9q6qBAb.js";import{B as g}from"./button.esm-UCLOxZC2.js";import{D as U,C as i}from"./datatable.esm-CMmFQ3HU.js";import{C as Z,c as v}from"./confirmdialog.esm-BEq-v8xE.js";import{D as T}from"./dropdown.esm-QLCraDAy.js";import{I as B}from"./inputtext.esm-DEkMZh4y.js";import{T as A}from"./tag.esm-BGFAObAh.js";import{A as ee}from"./arrow-left-or8JoJrA.js";import{U as w}from"./users-DzEoHvEj.js";import{U as p}from"./user-plus-tS8AZ8zT.js";import{U as z}from"./user-x-Nc0G_tZl.js";import{B as se}from"./briefcase-DYWREPBe.js";/* empty css            */import"./x-C9pk__-N.js";import"./createLucideIcon-D2rmkart.js";import"./overlayservice.esm-CKO1IaQb.js";import"./dialog.esm-CxRMZeg0.js";const ae={id:2,title:"Rapat Dewan Pengawas",date:"2025-11-21",time_start:"14:00",time_end:"16:00",location:"Ruang Angsana"},te=[{id:1,name:"Arsyad Muhammad",phone:"081234567801",office:{id:1,name:"DPW Jawa Tengah"},employment:{id:1,name:"Pembina"},assigned:!0,attended:!0},{id:2,name:"Amhar Aziz",phone:"081234567802",office:{id:2,name:"DPD Semarang"},employment:{id:2,name:"Pengurus"},assigned:!0,attended:!1},{id:3,name:"Aslam Hakim",phone:"081234567803",office:{id:3,name:"DPD Solo"},employment:{id:2,name:"Pengurus"},assigned:!0,attended:!0},{id:4,name:"Ahmad Fauzi",phone:"081234567804",office:{id:1,name:"DPW Jawa Tengah"},employment:{id:3,name:"Anggota"},assigned:!0,attended:!1},{id:5,name:"Budi Santoso",phone:"081234567805",office:{id:4,name:"DMW Jakarta"},employment:{id:3,name:"Anggota"},assigned:!0,attended:!1},{id:6,name:"Cahya Dermawan",phone:"081234567806",office:{id:5,name:"DPD Bandung"},employment:{id:4,name:"Pengawas"},assigned:!1,attended:!1},{id:7,name:"Dedi Kurniawan",phone:"081234567807",office:{id:6,name:"DPW Jawa Barat"},employment:{id:3,name:"Anggota"},assigned:!1,attended:!1},{id:8,name:"Eko Prasetyo",phone:"081234567808",office:{id:7,name:"DPD Yogyakarta"},employment:{id:3,name:"Anggota"},assigned:!1,attended:!1},{id:9,name:"Fitri Handayani",phone:"081234567809",office:{id:8,name:"DPW Bali"},employment:{id:2,name:"Pengurus"},assigned:!1,attended:!1},{id:10,name:"Galih Nugroho",phone:"081234567810",office:{id:2,name:"DPD Semarang"},employment:{id:3,name:"Anggota"},assigned:!1,attended:!1}],ne=[{id:1,name:"DPW Jawa Tengah"},{id:2,name:"DPD Semarang"},{id:3,name:"DPD Solo"},{id:4,name:"DMW Jakarta"},{id:5,name:"DPD Bandung"}],ie=[{id:1,name:"Pembina"},{id:2,name:"Pengurus"},{id:3,name:"Anggota"},{id:4,name:"Pengawas"}],Pe=({meetingId:le=2})=>{const[c,de]=d.useState(ae),[l,h]=d.useState(te),[x,L]=d.useState(null),[u,M]=d.useState(null),[f,F]=d.useState(""),[b,J]=d.useState(""),[r,j]=d.useState([]),[m,D]=d.useState([]),y=l.filter(s=>s.assigned),S=l.filter(s=>!s.assigned),K=()=>{q.get("/admin/kegiatan")},$=()=>{if(r.length===0)return;const s=l.filter(a=>r.includes(a.id)),t=l.map(a=>r.includes(a.id)?{...a,assigned:!0}:a);h(t),j([]),alert(`Berhasil assign ${s.length} peserta ke kegiatan`)},E=()=>{const s=P();s.length!==0&&v({message:`Assign ${s.length} peserta sesuai filter ke kegiatan ini?`,header:"Konfirmasi Assign",icon:"pi pi-check-circle",acceptLabel:"Assign",rejectLabel:"Batal",acceptClassName:"p-button-success",accept:()=>{const t=s.map(n=>n.id),a=l.map(n=>t.includes(n.id)?{...n,assigned:!0}:n);h(a),j([]),alert(`Berhasil assign ${s.length} peserta`)}})},I=()=>{if(m.length===0)return;const s=l.filter(a=>m.includes(a.id));if(s.some(a=>a.attended)){alert("Tidak bisa unassign peserta yang sudah check-in!");return}v({message:`Unassign ${s.length} peserta dari kegiatan ini?`,header:"Konfirmasi Unassign",icon:"pi pi-exclamation-triangle",acceptLabel:"Unassign",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{const a=l.map(n=>m.includes(n.id)?{...n,assigned:!1}:n);h(a),D([]),alert(`Berhasil unassign ${s.length} peserta`)}})},W=s=>{if(s.attended){alert("Tidak bisa unassign peserta yang sudah check-in!");return}v({message:`Unassign ${s.name} dari kegiatan ini?`,header:"Konfirmasi Unassign",icon:"pi pi-exclamation-triangle",acceptLabel:"Unassign",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{const t=l.map(a=>a.id===s.id?{...a,assigned:!1}:a);h(t),alert(`${s.name} berhasil di-unassign`)}})},O=()=>{console.log("Refresh data from API")},P=()=>S.filter(s=>{const t=s.name.toLowerCase().includes(f.toLowerCase())||s.phone.includes(f),a=!x||s.office.id===x.id,n=!u||s.employment.id===u.id;return t&&a&&n}),R=()=>y.filter(s=>s.name.toLowerCase().includes(b.toLowerCase())||s.phone.includes(b)),o=P(),N=R(),k=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{label:s.name.charAt(0),size:"normal",shape:"circle",className:"bg-emerald-600 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.phone})]})]}),C=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.office.name})]}),H=s=>{const t={Pembina:"info",Pengurus:"success",Pengawas:"warning",Anggota:"secondary"};return e.jsx(A,{value:s.employment.name,severity:t[s.employment.name]||"secondary"})},_=s=>s.attended?e.jsx(A,{value:"Sudah Check-in",severity:"success",icon:"pi pi-check"}):e.jsx(A,{value:"Belum Check-in",severity:"secondary"}),G=s=>e.jsx(g,{icon:e.jsx(z,{size:14}),label:"Unassign",className:"p-button-sm p-button-danger p-button-outlined",onClick:()=>W(s),disabled:s.attended}),X=ne.map(s=>({label:s.name,value:s})),Y=ie.map(s=>({label:s.name,value:s}));return e.jsxs(Q,{children:[e.jsx(Z,{}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:K,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(ee,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Detail Kegiatan"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{children:c.title}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Assign Peserta"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Assign Peserta"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[c.title," • ",new Date(c.date).toLocaleDateString("id-ID")," • ",c.time_start," - ",c.time_end]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Assigned"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:y.length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(w,{className:"text-emerald-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Available"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:S.length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(p,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Sudah Check-in"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:y.filter(s=>s.attended).length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(w,{className:"text-orange-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsx(g,{label:"Refresh Data",icon:"pi pi-refresh",className:"p-button-outlined",onClick:O})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-blue-50 p-4",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(p,{className:"text-blue-600",size:20}),"Peserta Tersedia (",o.length,")"]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(B,{placeholder:"Cari nama atau telepon...",value:f,onChange:s=>F(s.target.value),className:"w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(T,{value:x,options:X,onChange:s=>L(s.value),placeholder:"Filter Utusan",className:"w-full",showClear:!0}),e.jsx(T,{value:u,options:Y,onChange:s=>M(s.value),placeholder:"Filter Jabatan",className:"w-full",showClear:!0})]})]})]}),r.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-emerald-600 p-3 text-white",children:[e.jsxs("span",{className:"font-semibold",children:[r.length," dipilih"]}),e.jsx(g,{label:"Assign Selected",icon:e.jsx(p,{size:14}),className:"p-button-sm border-0 bg-white text-emerald-600",onClick:$})]}),e.jsx("div",{className:"p-4",children:e.jsx(g,{label:`Assign Semua Sesuai Filter (${o.length})`,icon:e.jsx(p,{size:16}),className:"p-button-success mb-3 w-full",onClick:E,disabled:o.length===0})}),e.jsxs(U,{value:o,selection:o.filter(s=>r.includes(s.id)),onSelectionChange:s=>j(s.value.map(t=>t.id)),dataKey:"id",emptyMessage:"Tidak ada peserta tersedia",scrollable:!0,scrollHeight:"500px",className:"text-sm",children:[e.jsx(i,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(i,{field:"name",header:"Nama",body:k}),e.jsx(i,{field:"office.name",header:"Utusan",body:C}),e.jsx(i,{field:"employment.name",header:"Jabatan",body:H})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-emerald-50 p-4",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(w,{className:"text-emerald-600",size:20}),"Peserta Assigned (",N.length,")"]})}),e.jsx(B,{placeholder:"Cari nama atau telepon...",value:b,onChange:s=>J(s.target.value),className:"w-full"})]}),m.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-red-600 p-3 text-white",children:[e.jsxs("span",{className:"font-semibold",children:[m.length," dipilih"]}),e.jsx(g,{label:"Unassign Selected",icon:e.jsx(z,{size:14}),className:"p-button-sm border-0 bg-white text-red-600",onClick:I})]}),e.jsxs(U,{value:N,selection:N.filter(s=>m.includes(s.id)),onSelectionChange:s=>D(s.value.map(t=>t.id)),dataKey:"id",emptyMessage:"Belum ada peserta yang di-assign",scrollable:!0,scrollHeight:"500px",className:"text-sm",children:[e.jsx(i,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(i,{field:"name",header:"Nama",body:k}),e.jsx(i,{field:"office.name",header:"Utusan",body:C}),e.jsx(i,{header:"Status",body:_}),e.jsx(i,{header:"Aksi",body:G,style:{width:"140px"}})]})]})]})]})};export{Pe as default};
