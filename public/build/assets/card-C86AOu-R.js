import{r as P,j as u}from"./app-CtOv9fd0.js";import{A as B}from"./auth-DLFdvG6P.js";import{Q as z}from"./index-BIdwRf0w.js";/* empty css            */import"./house-BA_8_7ez.js";import"./createLucideIcon-BHRLaawb.js";import"./user-B0FnuAlR.js";function G(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),i=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(i),t&&(n.href=t),i.href=e,i.href}const Q=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function d(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let g=null;function j(e={}){return g||(e.includeStyleProperties?(g=e.includeStyleProperties,g):(g=d(window.getComputedStyle(document.documentElement)),g))}function y(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function X(e){const t=y(e,"border-left-width"),r=y(e,"border-right-width");return e.clientWidth+t+r}function K(e){const t=y(e,"border-top-width"),r=y(e,"border-bottom-width");return e.clientHeight+t+r}function D(e,t={}){const r=t.width||X(e),n=t.height||K(e);return{width:r,height:n}}function J(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const f=16384;function Y(e){(e.width>f||e.height>f)&&(e.width>f&&e.height>f?e.width>e.height?(e.height*=f/e.width,e.width=f):(e.width*=f/e.height,e.height=f):e.width>f?(e.height*=f/e.width,e.width=f):(e.width*=f/e.height,e.height=f))}function p(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Z(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function N(e,t,r){const n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${r}`),i.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),Z(i)}const l=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||l(r,t)};function ee(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function te(e,t){return j(t).map(r=>{const n=e.getPropertyValue(r),i=e.getPropertyPriority(r);return`${r}: ${n}${i?" !important":""};`}).join(" ")}function re(e,t,r,n){const i=`.${e}:${t}`,s=r.cssText?ee(r):te(r,n);return document.createTextNode(`${i}{${s}}`)}function $(e,t,r,n){const i=window.getComputedStyle(e,r),s=i.getPropertyValue("content");if(s===""||s==="none")return;const a=Q();try{t.className=`${t.className} ${a}`}catch{return}const c=document.createElement("style");c.appendChild(re(a,r,i,n)),t.appendChild(c)}function ne(e,t,r){$(e,t,":before",r),$(e,t,":after",r)}const T="application/font-woff",F="image/jpeg",se={woff:T,woff2:T,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:F,jpeg:F,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ie(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function R(e){const t=ie(e).toLowerCase();return se[t]||""}function ae(e){return e.split(/,/)[1]}function E(e){return e.search(/^(data:)/)!==-1}function ce(e,t){return`data:${t};base64,${e}`}async function U(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const i=await n.blob();return new Promise((s,a)=>{const c=new FileReader;c.onerror=a,c.onloadend=()=>{try{s(r({res:n,result:c.result}))}catch(o){a(o)}},c.readAsDataURL(i)})}const S={};function oe(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function C(e,t,r){const n=oe(e,t,r.includeQueryParams);if(S[n]!=null)return S[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await U(e,r.fetchRequestInit,({res:a,result:c})=>(t||(t=a.headers.get("Content-Type")||""),ae(c)));i=ce(s,t)}catch(s){i=r.imagePlaceholder||"";let a=`Failed to fetch resource: ${e}`;s&&(a=typeof s=="string"?s:s.message),a&&console.warn(a)}return S[n]=i,i}async function le(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):p(t)}async function ue(e,t){if(e.currentSrc){const s=document.createElement("canvas"),a=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,a?.drawImage(e,0,0,s.width,s.height);const c=s.toDataURL();return p(c)}const r=e.poster,n=R(r),i=await C(r,n,t);return p(i)}async function fe(e,t){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await x(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function he(e,t){return l(e,HTMLCanvasElement)?le(e):l(e,HTMLVideoElement)?ue(e,t):l(e,HTMLIFrameElement)?fe(e,t):e.cloneNode(H(e))}const me=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",H=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function de(e,t,r){var n,i;if(H(t))return t;let s=[];return me(e)&&e.assignedNodes?s=d(e.assignedNodes()):l(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=d(e.contentDocument.body.childNodes):s=d(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||l(e,HTMLVideoElement)||await s.reduce((a,c)=>a.then(()=>x(c,r)).then(o=>{o&&t.appendChild(o)}),Promise.resolve()),t}function ge(e,t,r){const n=t.style;if(!n)return;const i=window.getComputedStyle(e);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):j(r).forEach(s=>{let a=i.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),l(e,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&t.getAttribute("d")&&(a=`path(${t.getAttribute("d")})`),n.setProperty(s,a,i.getPropertyPriority(s))})}function we(e,t){l(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),l(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function ye(e,t){if(l(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(i=>e.value===i.getAttribute("value"));n&&n.setAttribute("selected","")}}function pe(e,t,r){return l(t,Element)&&(ge(e,t,r),ne(e,t,r),we(e,t),ye(e,t)),t}async function xe(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const c=r[s].getAttribute("xlink:href");if(c){const o=e.querySelector(c),h=document.querySelector(c);!o&&h&&!n[c]&&(n[c]=await x(h,t,!0))}}const i=Object.values(n);if(i.length){const s="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg");a.setAttribute("xmlns",s),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const c=document.createElementNS(s,"defs");a.appendChild(c);for(let o=0;o<i.length;o++)c.appendChild(i[o]);e.appendChild(a)}return e}async function x(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>he(n,t)).then(n=>de(e,n,t)).then(n=>pe(e,n,t)).then(n=>xe(n,t))}const V=/url\((['"]?)([^'"]+?)\1\)/g,be=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Se=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Ee(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Re(e){const t=[];return e.replace(V,(r,n,i)=>(t.push(i),r)),t.filter(r=>!E(r))}async function Ce(e,t,r,n,i){try{const s=r?G(t,r):t,a=R(t);let c;return i||(c=await C(s,a,n)),e.replace(Ee(t),`$1${c}$3`)}catch{}return e}function Pe(e,{preferredFontFormat:t}){return t?e.replace(Se,r=>{for(;;){const[n,,i]=be.exec(r)||[];if(!i)return"";if(i===t)return`src: ${n};`}}):e}function M(e){return e.search(V)!==-1}async function O(e,t,r){if(!M(e))return e;const n=Pe(e,r);return Re(n).reduce((s,a)=>s.then(c=>Ce(c,a,t,r)),Promise.resolve(n))}async function w(e,t,r){var n;const i=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(i){const s=await O(i,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function $e(e,t){await w("background",e,t)||await w("background-image",e,t),await w("mask",e,t)||await w("-webkit-mask",e,t)||await w("mask-image",e,t)||await w("-webkit-mask-image",e,t)}async function Te(e,t){const r=l(e,HTMLImageElement);if(!(r&&!E(e.src))&&!(l(e,SVGImageElement)&&!E(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,i=await C(n,R(n),t);await new Promise((s,a)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...o)=>{try{s(t.onImageErrorHandler(...o))}catch(h){a(h)}}:a;const c=e;c.decode&&(c.decode=s),c.loading==="lazy"&&(c.loading="eager"),r?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Fe(e,t){const n=d(e.childNodes).map(i=>_(i,t));await Promise.all(n).then(()=>e)}async function _(e,t){l(e,Element)&&(await $e(e,t),await Te(e,t),await Fe(e,t))}function Le(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(i=>{r[i]=n[i]}),e}const L={};async function v(e){let t=L[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},L[e]=t,t}async function I(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async a=>{let c=a.replace(n,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),U(c,t.fetchRequestInit,({result:o})=>(r=r.replace(a,`url(${o})`),[a,o]))});return Promise.all(s).then(()=>r)}function k(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const o=i.exec(n);if(o===null)break;t.push(o[0])}n=n.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(a,"gi");for(;;){let o=s.exec(n);if(o===null){if(o=c.exec(n),o===null)break;s.lastIndex=c.lastIndex}else c.lastIndex=s.lastIndex;t.push(o[0])}return t}async function ve(e,t){const r=[],n=[];return e.forEach(i=>{if("cssRules"in i)try{d(i.cssRules||[]).forEach((s,a)=>{if(s.type===CSSRule.IMPORT_RULE){let c=a+1;const o=s.href,h=v(o).then(m=>I(m,t)).then(m=>k(m).forEach(b=>{try{i.insertRule(b,b.startsWith("@import")?c+=1:i.cssRules.length)}catch(q){console.error("Error inserting rule from remote css",{rule:b,error:q})}})).catch(m=>{console.error("Error loading remote css",m.toString())});n.push(h)}})}catch(s){const a=e.find(c=>c.href==null)||document.styleSheets[0];i.href!=null&&n.push(v(i.href).then(c=>I(c,t)).then(c=>k(c).forEach(o=>{a.insertRule(o,a.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(i=>{if("cssRules"in i)try{d(i.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),r))}function Ie(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>M(t.style.getPropertyValue("src")))}async function ke(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=d(e.ownerDocument.styleSheets),n=await ve(r,t);return Ie(n)}function W(e){return e.trim().replace(/["']/g,"")}function Ae(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(W(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function je(e,t){const r=await ke(e,t),n=Ae(e);return(await Promise.all(r.filter(s=>n.has(W(s.style.fontFamily))).map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return O(s.cssText,a,t)}))).join(`
`)}async function De(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await je(e,t);if(r){const n=document.createElement("style"),i=document.createTextNode(r);n.appendChild(i),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Ue(e,t={}){const{width:r,height:n}=D(e,t),i=await x(e,t,!0);return await De(i,t),await _(i,t),Le(i,t),await N(i,r,n)}async function He(e,t={}){const{width:r,height:n}=D(e,t),i=await Ue(e,t),s=await p(i),a=document.createElement("canvas"),c=a.getContext("2d"),o=t.pixelRatio||J(),h=t.canvasWidth||r,m=t.canvasHeight||n;return a.width=h*o,a.height=m*o,t.skipAutoScale||Y(a),a.style.width=`${h}`,a.style.height=`${m}`,t.backgroundColor&&(c.fillStyle=t.backgroundColor,c.fillRect(0,0,a.width,a.height)),c.drawImage(s,0,0,a.width,a.height),a}async function A(e,t={}){return(await He(e,t)).toDataURL()}function ze({auth:e,app:t}){const r=e.user,n=P.useRef(null),i=P.useRef(null),s=async()=>{if(n.current)try{const c=await A(n.current,{cacheBust:!0}),o=document.createElement("a");o.download=r.name+"-id-card.png",o.href=c,o.click()}catch(c){console.error("Failed to download image:",c)}},a=async()=>{if(i.current)try{const c=await A(i.current,{cacheBust:!0}),o=document.createElement("a");o.download=r.name+"-qr-code.png",o.href=c,o.click()}catch(c){console.error("Failed to download image:",c)}};return u.jsx(B,{children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsxs("div",{ref:n,className:"relative w-full max-w-xl",children:[u.jsx("img",{src:"/assets/img/card-vertical.png",alt:"Banner",className:"w-full rounded-lg shadow-md"}),u.jsxs("div",{className:"absolute top-1/4 left-1/2 flex w-full -translate-x-1/2 transform flex-col items-center space-y-4",children:[u.jsxs("div",{className:"text-center text-xl font-semibold text-white drop-shadow-lg",children:[r.name,u.jsxs("p",{className:"mt-2 text-xs font-thin",children:[r.office.type," ",r.office.name]})]}),u.jsx("img",{src:r.avatar,alt:"Foto Profil",className:"h-24 w-24 rounded-full border-2 border-white bg-emerald-800 object-cover shadow-lg"}),u.jsx("div",{ref:i,className:"rounded-sm bg-white p-1",children:u.jsx(z,{value:t.url+"/s/"+r.code,size:128,className:"h-32 w-32"})})]})]}),u.jsxs("div",{className:"flex flex-row justify-between gap-6",children:[u.jsx("button",{onClick:s,className:"rounded-lg bg-emerald-400 px-4 py-2 text-white shadow hover:bg-emerald-700",children:"Unduh"}),u.jsx("button",{onClick:a,className:"rounded-lg bg-emerald-400 px-4 py-2 text-white shadow hover:bg-emerald-700",children:"Unduh QR"})]})]})})}export{ze as default};
