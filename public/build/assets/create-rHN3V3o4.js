import{r as m,b as L,P as A,C as $,c as Y,O as p,d as I,D as S,u as W,j as e,a as q}from"./app-_gkUYuNs.js";import{A as G}from"./admin-CqPYKeNj.js";import{T as Q,B}from"./button.esm-C3tz-C1p.js";import{D as X}from"./dropdown.esm-DsKZ_bUF.js";import{K as P,I as g}from"./inputtext.esm-B4KvRqhI.js";import{S as Z}from"./selectbutton.esm-DaDBsv-U.js";import{A as ee}from"./arrow-left-UPDlLlFo.js";import{F as y}from"./file-text-BKoxsVZZ.js";import{C}from"./calendar-BQ7IVdGy.js";import{C as K}from"./clock-DIi5HCfx.js";import{M as z}from"./map-pin-CRUaZhJ_.js";import{S as ae}from"./save-I6pNtnWO.js";/* empty css            */import"./x-LXtp9ge4.js";import"./createLucideIcon-BouDqtOT.js";import"./overlayservice.esm-BR62LPPU.js";function _(){return _=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)({}).hasOwnProperty.call(a,l)&&(n[l]=a[l])}return n},_.apply(null,arguments)}function b(n){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},b(n)}function te(n,s){if(b(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var l=a.call(n,s);if(b(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}function se(n){var s=te(n,"string");return b(s)=="symbol"?s:s+""}function ne(n,s,a){return(s=se(s))in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}var le={root:function(s){var a=s.props,l=s.context,t=s.isFilled;return I("p-inputtextarea p-inputtext p-component",{"p-disabled":a.disabled,"p-filled":t,"p-inputtextarea-resizable":a.autoResize,"p-invalid":a.invalid,"p-variant-filled":a.variant?a.variant==="filled":l&&l.inputStyle==="filled"})}},ie=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,v=$.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,invalid:!1,variant:null,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0,className:null},css:{classes:le,styles:ie}});function D(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);s&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,l)}return a}function E(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?D(Object(a),!0).forEach(function(l){ne(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}var F=m.memo(m.forwardRef(function(n,s){var a=L(),l=m.useContext(A),t=v.getProps(n,l),d=m.useRef(s),o=m.useRef(0),x=v.setMetaData(E(E({props:t},t.__parentMetadata),{},{context:{disabled:t.disabled}})),f=x.ptm,O=x.cx,N=x.isUnstyled;Y(v.css.styles,N,{name:"inputtextarea"});var k=function(r){t.autoResize&&h(),t.onFocus&&t.onFocus(r)},j=function(r){t.autoResize&&h(),t.onBlur&&t.onBlur(r)},w=function(r){t.autoResize&&h(),t.onKeyUp&&t.onKeyUp(r)},i=function(r){t.onKeyDown&&t.onKeyDown(r),t.keyfilter&&P.onKeyPress(r,t.keyfilter,t.validateOnly)},T=function(r){t.onBeforeInput&&t.onBeforeInput(r),t.keyfilter&&P.onBeforeInput(r,t.keyfilter,t.validateOnly)},R=function(r){t.onPaste&&t.onPaste(r),t.keyfilter&&P.onPaste(r,t.keyfilter,t.validateOnly)},U=function(r){var c=r.target;t.autoResize&&h(p.isEmpty(c.value)),t.onInput&&t.onInput(r),p.isNotEmpty(c.value)?S.addClass(c,"p-filled"):S.removeClass(c,"p-filled")},h=function(r){var c=d.current;c&&M()&&(o.current||(o.current=c.scrollHeight,c.style.overflow="hidden"),(o.current!==c.scrollHeight||r)&&(c.style.height="",c.style.height=c.scrollHeight+"px",parseFloat(c.style.height)>=parseFloat(c.style.maxHeight)?(c.style.overflowY="scroll",c.style.height=c.style.maxHeight):c.style.overflow="hidden",o.current=c.scrollHeight))},M=function(){if(S.isVisible(d.current)){var r=d.current.getBoundingClientRect();return r.width>0&&r.height>0}return!1};m.useEffect(function(){p.combinedRefs(d,s)},[d,s]),m.useEffect(function(){t.autoResize&&h(!0)},[t.autoResize,t.value]);var H=m.useMemo(function(){return p.isNotEmpty(t.value)||p.isNotEmpty(t.defaultValue)},[t.value,t.defaultValue]),J=p.isNotEmpty(t.tooltip),V=a({ref:d,className:I(t.className,O("root",{context:l,isFilled:H})),onFocus:k,onBlur:j,onKeyUp:w,onKeyDown:i,onBeforeInput:T,onInput:U,onPaste:R},v.getOtherProps(t),f("root"));return m.createElement(m.Fragment,null,m.createElement("textarea",V),J&&m.createElement(Q,_({target:d,content:t.tooltip,pt:f("tooltip")},t.tooltipOptions)))}));F.displayName="InputTextarea";const ke=({isEdit:n=!1,meeting:s=null})=>{const{data:a,setData:l,post:t,put:d}=W({name:s?.name||"",date:s?.date||"",start_time:s?.start_time?.slice(0,5)||"",end_time:s?.end_time?.slice(0,5)||"",room:s?.room||"",description:s?.description||"",status:s?.status||"Belum",all:!0}),[o,x]=m.useState({}),[f,O]=m.useState(!1),N=()=>{const i={};return a.name.trim()||(i.name="Judul kegiatan wajib diisi"),a.date||(i.date="Tanggal wajib diisi"),a.start_time||(i.start_time="Jam mulai wajib diisi"),a.end_time||(i.end_time="Jam selesai wajib diisi"),a.start_time&&a.end_time&&a.start_time>=a.end_time&&(i.end_time="Jam selesai harus lebih besar dari jam mulai"),a.room.trim()||(i.room="Lokasi wajib diisi"),x(i),Object.keys(i).length===0},k=()=>{N()&&(n?(console.log(a),d("/admin/kegiatan/"+s.code,{onError:i=>{console.log("Validation Errors:",i)},onSuccess:()=>console.log("SUCCESS")})):t("/admin/kegiatan",{onError:i=>{console.log("Validation Errors:",i)},onSuccess:()=>console.log("SUCCESS")}))},j=()=>{q.get("/admin/kegiatan")},w=[{label:"Belum Dimulai",value:"Belum"},{label:"Sedang Berlangsung",value:"Sedang"},{label:"Selesai",value:"Telah"}];return e.jsxs(G,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:j,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(ee,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:n?"Edit Kegiatan":"Tambah Kegiatan Baru"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n?"Edit Kegiatan":"Tambah Kegiatan Baru"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Judul Kegiatan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(y,{size:16})}),e.jsx(g,{value:a.name,onChange:i=>l("name",i.target.value),placeholder:"Contoh: Pembukaan Munas VI",className:`w-full ${o.name?"p-invalid":""}`})]}),o.name&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tanggal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(C,{size:16})}),e.jsx(g,{type:"date",value:a.date,onChange:i=>l("date",i.target.value),className:`w-full ${o.date?"p-invalid":""}`})]}),o.date&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(X,{value:a.status,options:w,onChange:i=>l("status",i.value),placeholder:"Pilih status",className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jam Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(K,{size:16})}),e.jsx(g,{type:"time",value:a.start_time,onChange:i=>l("start_time",i.target.value),className:`w-full ${o.start_time?"p-invalid":""}`})]}),o.start_time&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jam Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(K,{size:16})}),e.jsx(g,{type:"time",value:a.end_time,onChange:i=>l("end_time",i.target.value),className:`w-full ${o.end_time?"p-invalid":""}`})]}),o.end_time&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.end_time})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Lokasi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(z,{size:16})}),e.jsx(g,{value:a.room,onChange:i=>l("room",i.target.value),placeholder:"Contoh: Aula Utama",className:`w-full ${o.room?"p-invalid":""}`})]}),o.room&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.room})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Deskripsi (Opsional)"}),e.jsx(F,{value:a.description,onChange:i=>l("description",i.target.value),placeholder:"Tambahkan deskripsi atau catatan tambahan...",rows:4,className:"w-full"})]}),n||e.jsx(Z,{value:a.all?"Semua":"Sebagian",onChange:i=>l("all",i.value=="Semua"),options:["Semua","Sebagian"]})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-blue-100",children:e.jsx(y,{className:"text-blue-600",size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-blue-800",children:"Informasi"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-700",children:[e.jsx("li",{children:"• Kegiatan dapat diedit kapan saja, bahkan setelah ada peserta yang assigned atau check-in"}),e.jsx("li",{children:"• Kegiatan hanya bisa dihapus jika belum ada peserta yang hadir (check-in)"}),e.jsx("li",{children:"• Status dapat diubah sesuai kondisi kegiatan: Belum Dimulai, Sedang Berlangsung, atau Selesai"})]})]})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx(B,{label:"Batal",className:"p-button-text",onClick:j,disabled:f}),e.jsx("div",{className:"flex gap-2",children:e.jsx(B,{label:n?"Simpan Perubahan":"Simpan",icon:e.jsx(ae,{size:16}),className:"p-button-outlined",onClick:k,loading:f})})]})]}),a.name&&e.jsxs("div",{className:"mt-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Preview Kegiatan"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Judul"}),e.jsx("p",{className:"font-semibold text-gray-800",children:a.name||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tanggal & Waktu"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[a.date?new Date(a.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"-",a.start_time&&a.end_time&&e.jsxs("span",{className:"ml-2",children:["(",a.start_time," - ",a.end_time,")"]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi"}),e.jsx("p",{className:"font-semibold text-gray-800",children:a.room||"-"})]})]}),a.description&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-800",children:a.description})]})]})]})]})]})};export{ke as default};
