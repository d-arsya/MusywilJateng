import{r as m,j as e,a as i}from"./app-COpH0XCm.js";import{A as U}from"./admin-CyfPq0yZ.js";import{B as r}from"./button.esm-DtxGPK4z.js";import{D as R,C as n}from"./datatable.esm-BuuQ_y1c.js";import{C as O,c as W}from"./confirmdialog.esm-q5CGEp7b.js";import{D as $}from"./dropdown.esm-BJYKc-dK.js";import{I as u}from"./inputtext.esm-DmTAkwTw.js";import{T as J}from"./tag.esm-DKQ29YAh.js";import{C as h}from"./calendar-CkrJnbzO.js";import{C as g}from"./clock-vLfGsW6X.js";import{U as p}from"./users-CfBChNCa.js";import{C as b}from"./circle-check-big-CaCobKMQ.js";import{P as V}from"./plus-Cn5a_qHB.js";import{S as q}from"./search-BHOMElG8.js";import{M as G}from"./map-pin-BJqTuKNy.js";import{Q as X}from"./qr-code-UV1-X4L9.js";import{U as Y}from"./user-plus-DODPkHag.js";import{P as Z,T as ee}from"./trash-2-B9wE3Tyd.js";/* empty css            */import"./x-B_v_SsBh.js";import"./createLucideIcon-CJq62oza.js";import"./overlayservice.esm-2fz9I_q6.js";import"./dialog.esm-C5aJQ7J3.js";const Ce=({meetings:l})=>{const[d,j]=m.useState(""),[o,f]=m.useState(null),[c,N]=m.useState(""),y=l.length,v=l.filter(s=>s.status==="Belum").length,w=l.filter(s=>s.status==="Sedang").length,C=l.filter(s=>s.status==="Telah").length,k=l.filter(s=>s.date===new Date().toISOString().split("T")[0]).reduce((s,a)=>s+a.total_attended,0),S=()=>{i.get("/admin/kegiatan/create")},T=s=>{i.get("/admin/kegiatan/create")},D=s=>{if(s.total_attended>0){alert("Tidak bisa menghapus kegiatan yang sudah ada peserta hadir!");return}W({message:`Apakah Anda yakin ingin menghapus "${s.name}"?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{setMeetings(l.filter(t=>t.id!==s.id))}})},B=s=>{i.get("/admin/kegiatan/stats")},z=s=>{i.get("/admin/kegiatan/assign")},A=s=>{i.get("/admin/kegiatan/scan")},M=()=>{console.log("Refresh data from API")},_=s=>e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 font-semibold text-gray-800",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(h,{size:12}),new Date(s.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),L=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{size:14,className:"text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[s.start_time," - ",s.end_time]})]}),K=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.room})]}),P=s=>{const t={Belum:{label:"Belum Dimulai",severity:"info"},Sedang:{label:"Sedang Berlangsung",severity:"warning"},Telah:{label:"Selesai",severity:"success"}}[s.status];return e.jsx(J,{value:t.label,severity:t.severity})},I=s=>{const a=s.attendance_rate;let t="text-gray-600";return a>=80?t="text-emerald-600":a>=50?t="text-orange-600":a>0&&(t="text-red-600"),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx(p,{size:14,className:"text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.total_attended,"/",s.total_participants]})]}),e.jsxs("div",{className:`text-sm font-semibold ${t}`,children:[a,"%"]})]})},H=s=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{icon:e.jsx(X,{size:14}),className:"p-button-rounded p-button-text p-button-success p-button-sm",onClick:()=>A(),tooltip:"Buka Scanner",disabled:s.status==="Telah"}),e.jsx(r,{icon:e.jsx(Y,{size:14}),className:"p-button-rounded p-button-text p-button-info p-button-sm",onClick:()=>z(),tooltip:"Assign Peserta"}),e.jsx(r,{icon:e.jsx(Z,{size:14}),className:"p-button-rounded p-button-text p-button-sm",onClick:()=>T(),tooltip:"Edit"}),e.jsx(r,{icon:e.jsx(ee,{size:14}),className:"p-button-rounded p-button-text p-button-danger p-button-sm",onClick:()=>D(s),tooltip:"Hapus",disabled:s.total_attended>0})]}),E=s=>e.jsx(r,{label:"Lihat Detail",className:"p-button-sm p-button-outlined",onClick:()=>B()}),x=l.filter(s=>{const a=s.name.toLowerCase().includes(d.toLowerCase())||s.room.toLowerCase().includes(d.toLowerCase()),t=!o||s.status===o.value,Q=!c||s.date===c;return a&&t&&Q}).sort((s,a)=>{const t=new Date(s.date)-new Date(a.date);return t!==0?t:s.start_time.localeCompare(a.start_time)}),F=[{label:"Belum Dimulai",value:"Belum"},{label:"Sedang Berlangsung",value:"Sedang"},{label:"Selesai",value:"Telah"}];return e.jsxs(U,{children:[e.jsx(O,{}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-800",children:"Manajemen Kegiatan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola jadwal kegiatan dan presensi peserta Munas"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-5",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Kegiatan"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:y})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(h,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Belum Dimulai"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:v})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(g,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Berlangsung"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:w})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(p,{className:"text-orange-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Selesai"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:C})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(b,{className:"text-emerald-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Hadir Hari Ini"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:k})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(b,{className:"text-purple-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{label:"Tambah Kegiatan Baru",icon:e.jsx(V,{size:16}),className:"p-button-success",onClick:S}),e.jsx(r,{label:"Refresh Data",icon:"pi pi-refresh",className:"p-button-outlined",onClick:M})]})}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Cari Kegiatan"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx(q,{size:16,className:"text-gray-400"}),e.jsx(u,{placeholder:"Judul atau lokasi...",value:d,onChange:s=>j(s.target.value),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Status"}),e.jsx($,{value:o,options:F,onChange:s=>f(s.value),placeholder:"Semua Status",className:"w-full",showClear:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Tanggal"}),e.jsx(u,{type:"date",value:c,onChange:s=>N(s.target.value),className:"w-full"})]})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Daftar Kegiatan (",x.length,")"]})}),e.jsxs(R,{value:x,emptyMessage:"Belum ada kegiatan. Tambahkan kegiatan pertama!",className:"text-sm",children:[e.jsx(n,{field:"name",header:"Kegiatan",body:_,style:{minWidth:"250px"}}),e.jsx(n,{field:"start_time",header:"Waktu",body:L,style:{width:"150px"}}),e.jsx(n,{field:"room",header:"Lokasi",body:K,style:{width:"180px"}}),e.jsx(n,{field:"status",header:"Status",body:P,style:{width:"180px"}}),e.jsx(n,{header:"Kehadiran",body:I,style:{width:"120px"}}),e.jsx(n,{header:"Detail",body:E,style:{width:"140px"}}),e.jsx(n,{header:"Aksi",body:H,style:{width:"180px"}})]})]})]})};export{Ce as default};
