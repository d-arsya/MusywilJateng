import{r as c,f as A,u as L,j as e}from"./app-CSO-cxpp.js";import{A as $}from"./admin-CT2KB149.js";import{A as E}from"./avatar.esm-D0Nzu-02.js";import{B as d}from"./badge.esm-BOwUJr-0.js";import{D as G,C as r}from"./datatable.esm-PDsTVL0p.js";import{C as U}from"./confirmdialog.esm-DkOIbiFJ.js";import{D as _}from"./dropdown.esm-Cy-l1WZ_.js";import{I as D}from"./inputtext.esm-Dowr2dsl.js";import{T as i}from"./tag.esm-DNfua_6p.js";import{C as z}from"./credit-card-DeB2dyAQ.js";import{F as K}from"./file-text-CLw4GOXJ.js";import{U as I}from"./users-CiOzobjc.js";import{C as h}from"./circle-check-DJUJ_28v.js";import{C as f}from"./clock-DJdLXVIX.js";import{C as g}from"./circle-x-Cd4UaRrJ.js";import{S as O}from"./search-Bg264ufs.js";import{C as V}from"./circle-alert-DXu0xdAi.js";import{c as j}from"./createLucideIcon-CC4qKH7c.js";/* empty css            */import"./x-DbVGnjQd.js";import"./button.esm-ACUyvw5u.js";import"./overlayservice.esm-CMOQkrwO.js";import"./dialog.esm-BibbKjOr.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],J=j("banknote",W);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b=j("eye",X);function be({payments:s}){const[v,x]=c.useState(null),[u,y]=c.useState(""),[m,N]=c.useState(null),{showToast:n}=A(),{post:p}=L(null);c.useEffect(()=>{const a=s.filter(l=>l.paid);x(a)},[s]);const t={verified:s.filter(a=>a.paid).length,pending:s.filter(a=>a.invoice&&!a.paid).length,unpaid:s.filter(a=>!a.invoice&&!a.paid).length,totalAmount:s.filter(a=>a.paid).length*5e5},w=a=>{p(`/pembayaran/check/${a.data.code}`,{onSuccess:()=>n("success","Berhasil!",`Berhasil mengonfirmasi pembayaran ${a.data.name}`),onError:()=>n("warn","Gagal!",`Gagal mengonfirmasi pembayaran ${a.data.name}`)})},k=a=>{p(`/pembayaran/uncheck/${a.data.code}`,{preserveState:!0,onSuccess:()=>n("success","Berhasil!",`Berhasil mengonfirmasi pembayaran ${a.data.name}`),onError:()=>n("warn","Gagal!",`Gagal mengonfirmasi pembayaran ${a.data.name}`)})},C=[{label:"Semua Status",value:null},{label:"Terverifikasi",value:"verified"},{label:"Menunggu",value:"pending"},{label:"Belum Bayar",value:"unpaid"}],P=()=>{if(!m)return s;switch(m){case"verified":return s.filter(a=>a.paid);case"pending":return s.filter(a=>a.invoice&&!a.paid);case"unpaid":return s.filter(a=>!a.invoice&&!a.paid);default:return s}},T=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(I,{className:"h-8 w-8 opacity-80"}),e.jsx(d,{value:t.total,className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Peserta"}),e.jsx("p",{className:"text-2xl font-bold",children:t.total})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(h,{className:"h-8 w-8 opacity-80"}),e.jsx(d,{value:t.verified,severity:"success",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Terverifikasi"}),e.jsx("p",{className:"text-2xl font-bold",children:t.verified})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(f,{className:"h-8 w-8 opacity-80"}),e.jsx(d,{value:t.pending,severity:"warning",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Menunggu"}),e.jsx("p",{className:"text-2xl font-bold",children:t.pending})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-500 to-rose-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(g,{className:"h-8 w-8 opacity-80"}),e.jsx(d,{value:t.unpaid,severity:"danger",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Belum Bayar"}),e.jsx("p",{className:"text-2xl font-bold",children:t.unpaid})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md lg:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(O,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(D,{value:u,onChange:a=>y(a.target.value),placeholder:"Cari nama atau kode peserta...",className:"w-full pl-10"})]}),e.jsx(_,{value:m,onChange:a=>N(a.value),options:C,placeholder:"Filter Status",className:"w-full lg:w-48"})]}),e.jsx("div",{className:"rounded-lg border-l-4 border-blue-500 bg-blue-50 p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(V,{className:"mt-0.5 mr-3 h-5 w-5 text-blue-600"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"mb-1 font-semibold",children:"Panduan Verifikasi Pembayaran"}),e.jsxs("p",{children:["• Centang checkbox untuk ",e.jsx("strong",{children:"memverifikasi"})," pembayaran yang sudah valid"]}),e.jsxs("p",{children:["• Uncheck untuk ",e.jsx("strong",{children:"membatalkan"})," verifikasi yang salah"]}),e.jsx("p",{children:'• Klik "Bukti" untuk melihat bukti transfer peserta'})]})]})})]}),S=a=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{image:a.avatar||`https://ui-avatars.com/api/?name=${a.name}&background=10b981&color=fff`,shape:"circle",size:"large",className:"border-2 border-emerald-100"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:a.name}),e.jsx("p",{className:"font-mono text-xs text-gray-500",children:a.code})]})]}),B=a=>{const l={DPW:"info",DPD:"success",DMW:"warning",Kampus:"help",Orpen:"danger"};return e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{value:a.office.type,severity:l[a.office.type]||"info",className:"text-xs font-semibold"}),e.jsx("p",{className:"text-sm text-gray-700",children:a.office.name})]})},F=a=>{const l={Pembina:"bg-purple-100 text-purple-700",Pengurus:"bg-blue-100 text-blue-700",Pengawas:"bg-amber-100 text-amber-700",Anggota:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${l[a.employment.name]||l.Anggota}`,children:a.employment.name})},R=a=>{const{paid:l,invoice:o}=a;return l?e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(i,{value:"Terverifikasi",severity:"success",icon:e.jsx(h,{className:"mr-1 h-3 w-3"}),className:"font-semibold"}),o?e.jsxs("a",{href:o,target:"_blank",className:"inline-flex items-center gap-1 rounded-lg bg-emerald-500 px-3 py-1 text-xs font-semibold text-white transition hover:bg-emerald-600",children:[e.jsx(b,{className:"h-3 w-3"}),"Bukti"]}):e.jsx(i,{value:"Cash",icon:e.jsx(J,{className:"mr-1 h-3 w-3"}),className:"bg-blue-500 font-semibold text-white"})]}):o?e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx(i,{value:"Menunggu",severity:"warning",icon:e.jsx(f,{className:"mr-1 h-3 w-3"}),className:"font-semibold"}),e.jsxs("a",{href:o,target:"_blank",className:"inline-flex items-center gap-1 rounded-lg bg-amber-500 px-3 py-1 text-xs font-semibold text-white transition hover:bg-amber-600",children:[e.jsx(b,{className:"h-3 w-3"}),"Cek"]})]}):e.jsx(i,{value:"Belum Bayar",severity:"danger",icon:e.jsx(g,{className:"mr-1 h-3 w-3"}),className:"font-semibold"})},M=P();return e.jsxs($,{children:[e.jsx(U,{}),e.jsxs("div",{className:"space-y-6 p-2 md:p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center text-3xl font-bold text-gray-800",children:[e.jsx(z,{className:"mr-3 h-8 w-8 text-emerald-600"}),"Verifikasi Pembayaran"]}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Kelola dan verifikasi kontribusi peserta"})]})}),e.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs(G,{value:M,selection:v,onSelectionChange:a=>x(a.value),onRowSelect:w,onRowUnselect:k,dataKey:"id",paginator:!0,rows:15,rowsPerPageOptions:[15,25,50,100],globalFilter:u,header:T,emptyMessage:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(K,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Tidak ada data pembayaran"})]}),stripedRows:!0,showGridlines:!0,responsiveLayout:"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Menampilkan {first} - {last} dari {totalRecords} peserta",children:[e.jsx(r,{selectionMode:"multiple",frozen:!0}),e.jsx(r,{body:S,header:"Peserta",sortable:!0,field:"name"}),e.jsx(r,{body:B,header:"Utusan",sortable:!0,sortField:"office.name",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell"}),e.jsx(r,{body:F,header:"Jabatan",field:"employment.name",headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell"}),e.jsx(r,{body:R,header:"Status",sortable:!0,sortField:"paid"})]})})]})]})}export{be as default};
