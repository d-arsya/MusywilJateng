import{r as n,j as e,a as q}from"./app-CDoqvrB_.js";import{A as X}from"./admin-CKXe-yBX.js";import{A as Y,T as u}from"./tag.esm-YYzPS09-.js";import{B as r,I as f,D as Z,C as o}from"./datatable.esm-BryucHDz.js";import{C as ee,D as S,c as se}from"./confirmdialog.esm-BgFSz5f6.js";import{A as ae,U as te}from"./user-plus-BCfxlzSH.js";import{D as T,P as ne}from"./plus-C1nbWz3q.js";import{U as R}from"./users-BFOm1zZ8.js";import{S as D}from"./search-BflZtzIn.js";import{P as le,T as re}from"./trash-2-BnzbNZMq.js";/* empty css            */import"./x-tXtD0dz4.js";import"./createLucideIcon-LAJ5KBlG.js";const ie=[{id:101,name:"Ahmad Fauzi",phone:"081234567890",office:{name:"DPW Jawa Tengah"},employment:{name:"Pengurus"}},{id:102,name:"Budi Santoso",phone:"081234567891",office:{name:"DPD Semarang"},employment:{name:"Anggota"}},{id:103,name:"Siti Aminah",phone:"081234567892",office:{name:"DPD Solo"},employment:{name:"Pembina"}},{id:104,name:"Rina Wati",phone:"081234567893",office:{name:"DMW Jakarta"},employment:{name:"Pengawas"}},{id:105,name:"Hadi Wijaya",phone:"081234567894",office:{name:"DPW Jawa Timur"},employment:{name:"Pengurus"}}],ye=({building:x,rooms:l})=>{const[N,P]=n.useState(ie),[A,i]=n.useState(!1),[U,d]=n.useState(!1),[h,y]=n.useState(!1),[_,p]=n.useState(null),[m,g]=n.useState(""),[v,z]=n.useState(""),[c,B]=n.useState(null),[t,b]=n.useState([]),[j,w]=n.useState(""),K=()=>{y(!1),p(null),g(""),i(!0)},L=s=>{y(!0),p(s),g(s.name),i(!0)},H=()=>{if(h)setRooms(l.map(s=>s.id===_.id?{...s,name:m}:s));else{const s={id:Math.max(...l.map(a=>a.id))+1,building_id:x.id,name:m,users_count:0};setRooms([...l,s])}i(!1)},E=s=>{if(s.users_count>0){alert("Tidak bisa menghapus kamar yang masih berpenghuni!");return}se({message:`Apakah Anda yakin ingin menghapus ${s.name}?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{setRooms(l.filter(a=>a.id!==s.id))}})},$=s=>{q.get("/admin/penginapan/kamar/"+s.name)},M=s=>{p(s),B(s),b([]),w(""),d(!0)},W=()=>{if(t.length===0)return;const s=l.find(a=>a.id===c.id);s.users_count+=t.length,setRooms([...l]),P(N.filter(a=>!t.includes(a.id))),d(!1),alert(`Berhasil assign ${t.length} peserta ke ${c.name}`)},J=()=>{console.log("Navigate back to dashboard")},Q=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(T,{className:"text-purple-600",size:20})}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-800",children:s.name})})]}),O=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{size:16,className:"text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[s.users_count," Orang"]})]}),F=s=>s.users_count===0?e.jsx(u,{value:"Kosong",severity:"secondary"}):s.users_count<5?e.jsx(u,{value:"Tersedia",severity:"success"}):s.users_count<8?e.jsx(u,{value:"Sedang",severity:"warning"}):e.jsx(u,{value:"Ramai",severity:"info"}),I=s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{icon:e.jsx(te,{size:16}),className:"p-button-rounded p-button-text p-button-success p-button-sm",onClick:()=>M(s),tooltip:"Tambah Peserta"}),e.jsx(r,{icon:e.jsx(le,{size:16}),className:"p-button-rounded p-button-text p-button-sm",onClick:()=>L(s),tooltip:"Edit"}),e.jsx(r,{icon:e.jsx(re,{size:16}),className:"p-button-rounded p-button-text p-button-danger p-button-sm",onClick:()=>E(s),tooltip:"Hapus",disabled:s.users_count>0})]}),G=s=>e.jsx(r,{label:"Lihat Detail",className:"p-button-sm p-button-outlined",onClick:()=>$(s)}),V=l.filter(s=>s.name.toLowerCase().includes(v.toLowerCase())).sort((s,a)=>{const C=s.name.localeCompare(a.name);return C!==0?C:a.users_count-s.users_count}),k=N.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||s.office.name.toLowerCase().includes(j.toLowerCase()));return e.jsxs(X,{children:[e.jsx(ee,{}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:J,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(ae,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:x.name})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:x.name})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Kamar"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:l.length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(T,{className:"text-purple-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Penghuni"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:l.reduce((s,a)=>s+a.users_count,0)})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(R,{className:"text-emerald-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx(r,{label:"Tambah Kamar Baru",icon:e.jsx(ne,{size:16}),className:"p-button-success",onClick:K})})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Daftar Kamar"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx(D,{size:16,className:"text-gray-400"}),e.jsx(f,{placeholder:"Cari kamar...",value:v,onChange:s=>z(s.target.value),className:"p-inputtext-sm"})]})})]})}),e.jsxs(Z,{value:V,emptyMessage:"Belum ada kamar. Tambahkan kamar pertama!",className:"text-sm",children:[e.jsx(o,{field:"name",header:"Nama Kamar",body:Q}),e.jsx(o,{field:"users_count",header:"Jumlah Penghuni",body:O}),e.jsx(o,{header:"Status",body:F,style:{width:"120px"}}),e.jsx(o,{header:"Detail",body:G,style:{width:"150px"}}),e.jsx(o,{header:"Aksi",body:I,style:{width:"150px"}})]})]}),e.jsx(S,{header:h?"Edit Kamar":"Tambah Kamar Baru",visible:A,style:{width:"450px"},onHide:()=>i(!1),footer:e.jsxs("div",{children:[e.jsx(r,{label:"Batal",className:"p-button-text",onClick:()=>i(!1)}),e.jsx(r,{label:h?"Simpan":"Tambah",className:"p-button-success",onClick:H,disabled:!m.trim()})]}),children:e.jsx("div",{className:"flex flex-col gap-4 pt-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Kamar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(f,{value:m,onChange:s=>g(s.target.value),placeholder:"Contoh: Kamar 1",className:"w-full",autoFocus:!0})]})})}),e.jsx(S,{header:`Tambah Peserta ke ${c?.name}`,visible:U,style:{width:"600px",maxHeight:"80vh"},onHide:()=>d(!1),footer:e.jsxs("div",{children:[e.jsx(r,{label:"Batal",className:"p-button-text",onClick:()=>d(!1)}),e.jsx(r,{label:`Assign ${t.length} Peserta`,className:"p-button-success",onClick:W,disabled:t.length===0})]}),children:e.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[c?.users_count||0," orang"]})," sudah berada di kamar ini"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Pilih Peserta Belum Terplotting"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx(D,{size:16,className:"text-gray-400"}),e.jsx(f,{placeholder:"Cari nama atau utusan...",value:j,onChange:s=>w(s.target.value),className:"w-full"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto rounded-lg border border-gray-200",children:k.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Tidak ada peserta yang belum terplotting"}):k.map(s=>e.jsxs("div",{className:`flex cursor-pointer items-center gap-3 border-b border-gray-100 p-3 hover:bg-gray-50 ${t.includes(s.id)?"bg-emerald-50":""}`,onClick:()=>{t.includes(s.id)?b(t.filter(a=>a!==s.id)):b([...t,s.id])},children:[e.jsx("input",{type:"checkbox",checked:t.includes(s.id),onChange:()=>{},className:"h-4 w-4"}),e.jsx(Y,{label:s.name.charAt(0),size:"normal",shape:"circle",className:"bg-emerald-600 text-white"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.office.name," • ",s.employment.name]})]})]},s.id))}),t.length>0&&e.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-3",children:e.jsxs("p",{className:"text-sm text-emerald-800",children:[e.jsxs("strong",{children:[t.length," peserta"]})," dipilih untuk di-assign"]})})]})})]})};export{ye as default};
