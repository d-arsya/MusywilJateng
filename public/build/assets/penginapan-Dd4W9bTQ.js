import{r,u as M,j as e,a as U}from"./app-iQ1kgeFB.js";import{A as H}from"./admin-BSoS75xl.js";import{B as a}from"./button.esm-B2g1SOnp.js";import{D as V,C as n}from"./datatable.esm-BM6Xkt5w.js";import{C as F,c as O}from"./confirmdialog.esm-DlE_CEhd.js";import{D as I}from"./dialog.esm-bWhnKX7Y.js";import{I as g}from"./inputtext.esm-C_7bjXco.js";import{B as p}from"./building-2-DpYbMUxg.js";import{D as h}from"./door-open-KeP-38w2.js";import{U as c}from"./users-BQs9j9FI.js";import{P as J}from"./plus-ChcOU-E7.js";import{P as Q,T as R}from"./trash-2-Dkg63zwv.js";/* empty css            */import"./x-ah9MSs77.js";import"./createLucideIcon-3_8m6KHY.js";import"./dropdown.esm-DdkJsKkH.js";import"./overlayservice.esm-DlXEOEqK.js";const ue=({buildings:i,totalUnassigned:j})=>{const[b,t]=r.useState(!1),[o,m]=r.useState(!1),[f,N]=r.useState(null),[$,q]=r.useState(""),[x,y]=r.useState(""),{data:d,setData:u,post:v,put:w,delete:C}=M({name:""}),S=i.length,B=i.reduce((s,l)=>s+l.rooms_count,0),T=i.reduce((s,l)=>s+l.users_count,0),D=()=>{m(!1),t(!0)},E=s=>{m(!0),N(s),u("name",s.name),t(!0)},k=()=>{o?w("/admin/penginapan/"+f.id,{onError:s=>{console.log("Validation Errors:",s)},onSuccess:()=>console.log("SUCCESS")}):v("/admin/penginapan",{onError:s=>{console.log(d),console.log("Validation Errors:",s)},onSuccess:()=>console.log("SUCCESS")}),t(!1)},z=s=>{O({message:`Apakah Anda yakin ingin menghapus ${s.name}?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{C("/admin/penginapan/"+s.id,{onError:l=>{console.log("Validation Errors:",l)},onSuccess:()=>console.log("SUCCESS")})}})},A=s=>{U.get("/admin/penginapan/gedung/"+s.name)},G=s=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{icon:e.jsx(Q,{size:16}),className:"p-button-rounded p-button-text p-button-sm",onClick:()=>E(s),tooltip:"Edit"}),e.jsx(a,{icon:e.jsx(R,{size:16}),className:"p-button-rounded p-button-text p-button-danger p-button-sm",onClick:()=>z(s),tooltip:"Hapus"})]}),P=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(p,{className:"text-emerald-600",size:20})}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-gray-800",children:s.name})})]}),L=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{size:16,className:"text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[s.rooms_count," Kamar"]})]}),_=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-gray-500"}),e.jsxs("span",{className:"font-medium",children:[s.users_count," Orang"]})]}),K=s=>e.jsx(a,{label:"Lihat Detail",className:"p-button-sm p-button-outlined",onClick:()=>A(s)});return e.jsxs(H,{children:[e.jsx(F,{}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-800",children:"Manajemen Penginapan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola gedung, kamar, dan penempatan peserta Munas"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Gedung"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:S})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(p,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Kamar"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:B})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100",children:e.jsx(h,{className:"text-purple-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Sudah Terplotting"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:T})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(c,{className:"text-emerald-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Belum Terplotting"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:j})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(c,{className:"text-orange-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx(a,{label:"Tambah Gedung Baru",icon:e.jsx(J,{size:16}),className:"p-button-success",onClick:D})})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Daftar Gedung"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"p-input-icon-left",children:e.jsx(g,{placeholder:"Cari gedung...",value:x,onChange:s=>y(s.target.value),className:"p-inputtext-sm"})})})]})}),e.jsxs(V,{value:i.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())),sortField:"name",sortOrder:1,emptyMessage:"Belum ada gedung. Tambahkan gedung pertama!",className:"text-sm",children:[e.jsx(n,{field:"name",header:"Nama Gedung",body:P,sortable:!0}),e.jsx(n,{field:"rooms_count",header:"Jumlah Kamar",body:L,sortable:!0}),e.jsx(n,{field:"users_count",header:"Jumlah Penghuni",body:_,sortable:!0}),e.jsx(n,{header:"Detail",body:K,style:{width:"150px"}}),e.jsx(n,{header:"Aksi",body:G,style:{width:"120px"}})]})]}),e.jsx(I,{header:o?"Edit Gedung":"Tambah Gedung Baru",visible:b,style:{width:"450px"},onHide:()=>t(!1),footer:e.jsxs("div",{children:[e.jsx(a,{label:"Batal",className:"p-button-text",onClick:()=>t(!1)}),e.jsx(a,{label:o?"Simpan":"Tambah",className:"p-button-success",onClick:k,disabled:!d.name.trim()})]}),children:e.jsx("div",{className:"flex flex-col gap-4 pt-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Gedung ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(g,{value:d.name,onChange:s=>u("name",s.target.value),placeholder:"Contoh: Gedung Aswad",className:"w-full",autoFocus:!0})]})})})]})};export{ue as default};
