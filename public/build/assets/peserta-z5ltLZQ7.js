import{r as j,j as e,L as A}from"./app-CtOv9fd0.js";import{A as S}from"./admin-Bb6GXFmG.js";import{B as p,S as L,A as $,T as u}from"./tag.esm-D3gPBgZ7.js";import{D as F,C as x,I as W,a as M}from"./datatable.esm-BMUOFSen.js";import{U as f}from"./users-mexskvA_.js";import{C as N}from"./circle-check-Dkv8D4Du.js";import{C as g}from"./clock-DH2aFngn.js";import{C as b}from"./calendar-sVg_pcYV.js";import{P as E}from"./phone-BrGc-eDp.js";import{c as R}from"./createLucideIcon-BHRLaawb.js";/* empty css            */import"./x-DwVzxzjo.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],q=R("user-check",U);let y={};const I=a=>{if(!a||!a.query&&!a.mergeQuery)return"";const s=a.query??a.mergeQuery,i=a.mergeQuery!==void 0,m=l=>l===!0?"1":l===!1?"0":l.toString(),r=new URLSearchParams(i&&typeof window<"u"?window.location.search:"");for(const l in s){if(s[l]===void 0||s[l]===null){r.delete(l);continue}if(Array.isArray(s[l]))r.has(`${l}[]`)&&r.delete(`${l}[]`),s[l].forEach(o=>{r.append(`${l}[]`,o.toString())});else if(typeof s[l]=="object"){r.forEach((o,h)=>{h.startsWith(`${l}[`)&&r.delete(h)});for(const o in s[l])typeof s[l][o]>"u"||["string","number","boolean"].includes(typeof s[l][o])&&r.set(`${l}[${o}]`,m(s[l][o]))}else r.set(l,m(s[l]))}const n=r.toString();return n.length>0?`?${n}`:""},_=a=>{const s={...a??{}};for(const i in y)s[i]===void 0&&y[i]!==void 0&&(s[i]=y[i]);return s},d=(a,s)=>({url:d.url(a,s),method:"get"});d.definition={methods:["get","head"],url:"/admin/peserta/{user}"};d.url=(a,s)=>{(typeof a=="string"||typeof a=="number")&&(a={user:a}),typeof a=="object"&&!Array.isArray(a)&&"code"in a&&(a={user:a.code}),Array.isArray(a)&&(a={user:a[0]}),a=_(a);const i={user:typeof a.user=="object"?a.user.code:a.user};return d.definition.url.replace("{user}",i.user.toString()).replace(/\/+$/,"")+I(s)};d.get=(a,s)=>({url:d.url(a,s),method:"get"});d.head=(a,s)=>({url:d.url(a,s),method:"head"});function ee({users:a}){const[s,i]=j.useState(""),[m,r]=j.useState(null),n={total:a.length,verified:a.filter(t=>t.paid).length,pending:a.filter(t=>!t.paid).length,arriving:a.filter(t=>new Date(t.arrive)<=new Date).length},l=[{label:"Semua Jabatan",value:null},{label:"Pembina",value:"Pembina"},{label:"Pengurus",value:"Pengurus"},{label:"Pengawas",value:"Pengawas"},{label:"Anggota",value:"Anggota"}],o=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(f,{className:"h-8 w-8 opacity-80"}),e.jsx(p,{value:n.total,severity:"info",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Peserta"}),e.jsx("p",{className:"text-2xl font-bold",children:n.total})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(N,{className:"h-8 w-8 opacity-80"}),e.jsx(p,{value:n.verified,severity:"success",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Terverifikasi"}),e.jsx("p",{className:"text-2xl font-bold",children:n.verified})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(g,{className:"h-8 w-8 opacity-80"}),e.jsx(p,{value:n.pending,severity:"warning",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Menunggu"}),e.jsx("p",{className:"text-2xl font-bold",children:n.pending})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(b,{className:"h-8 w-8 opacity-80"}),e.jsx(p,{value:n.arriving,className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Sudah Tiba"}),e.jsx("p",{className:"text-2xl font-bold",children:n.arriving})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md lg:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(L,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx(W,{value:s,onChange:t=>i(t.target.value),placeholder:"Cari nama, kode, atau nomor telepon...",className:"w-full pl-10"})]}),e.jsx(M,{value:m,onChange:t=>r(t.value),options:l,placeholder:"Filter Jabatan",className:"w-full lg:w-48"})]})]}),h=t=>e.jsxs(A,{href:d(t.code),className:"-m-2 flex items-center space-x-3 rounded-lg p-2 transition hover:bg-gray-50",children:[e.jsx($,{image:t.avatar||`https://ui-avatars.com/api/?name=${t.name}&background=10b981&color=fff`,shape:"circle",size:"large",className:"border-2 border-emerald-100"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx(E,{className:"mr-1 h-3 w-3"}),t.phone]})]})]}),v=t=>{const c={DPW:"info",DPD:"success",DMW:"warning",Kampus:"help",Orpen:"danger"};return e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{value:t.office.type,severity:c[t.office.type]||"info",className:"text-xs font-semibold"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t.office.name})]})},w=t=>{const c={Pembina:"bg-purple-100 text-purple-700 border-purple-200",Pengurus:"bg-blue-100 text-blue-700 border-blue-200",Pengawas:"bg-amber-100 text-amber-700 border-amber-200",Anggota:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsxs("span",{className:`inline-flex items-center rounded-full border-2 px-3 py-1 text-sm font-semibold ${c[t.employment.name]||c.Anggota}`,children:[e.jsx(q,{className:"mr-1 h-3 w-3"}),t.employment.name]})},P=t=>e.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 px-3 py-2 text-center font-mono font-bold text-emerald-600",children:t.code}),k=t=>{const c=new Date(t.arrive).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),T=new Date(t.depart).toLocaleDateString("id-ID",{day:"numeric",month:"short"});return e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"mb-1 flex items-center text-gray-600",children:[e.jsx(b,{className:"mr-1 h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"font-medium",children:"Tiba:"}),e.jsx("span",{className:"ml-1",children:c})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(b,{className:"mr-1 h-3 w-3 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Pulang:"}),e.jsx("span",{className:"ml-1",children:T})]})]})},C=t=>t.paid?e.jsx(u,{value:"Terverifikasi",severity:"success",icon:e.jsx(N,{className:"mr-1 h-3 w-3"}),className:"font-semibold"}):t.invoice?e.jsx(u,{value:"Menunggu",severity:"warning",icon:e.jsx(g,{className:"mr-1 h-3 w-3"}),className:"font-semibold"}):e.jsx(u,{value:"Belum",severity:"danger",icon:e.jsx(g,{className:"mr-1 h-3 w-3"}),className:"font-semibold"}),D=m?a.filter(t=>t.employment.name===m):a;return e.jsx(S,{children:e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center text-3xl font-bold text-gray-800",children:[e.jsx(f,{className:"mr-3 h-8 w-8 text-emerald-600"}),"Manajemen Peserta"]}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Munas VI Hidayatullah 2025"})]})}),e.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs(F,{value:D,dataKey:"id",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50,100],globalFilter:s,header:o,emptyMessage:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(f,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Tidak ada data peserta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Silakan tambah peserta baru"})]}),className:"text-sm",stripedRows:!0,showGridlines:!0,responsiveLayout:"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Menampilkan {first} - {last} dari {totalRecords} peserta",children:[e.jsx(x,{body:h,header:"Peserta",sortable:!0,sortField:"name",style:{minWidth:"250px"}}),e.jsx(x,{body:v,header:"Utusan",sortable:!0,sortField:"office.name",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell",style:{minWidth:"200px"}}),e.jsx(x,{body:w,header:"Jabatan",filter:!0,filterField:"employment.name",sortable:!0,sortField:"employment.name",headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell",style:{minWidth:"150px"}}),e.jsx(x,{body:P,header:"Kode Akses",sortable:!0,field:"code",style:{minWidth:"130px"}}),e.jsx(x,{body:k,header:"Jadwal",headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell",style:{minWidth:"180px"}}),e.jsx(x,{body:C,header:"Pembayaran",filter:!0,filterField:"payment_verified",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell",style:{minWidth:"140px"}})]})})]})})}export{ee as default};
