import{r as h,u as b,j as a,a as y,L as g}from"./app-B8-L5cd7.js";import{A as j}from"./admin-BVceKR1q.js";import{D as w,C as r}from"./datatable.esm-DwhBAUqD.js";/* empty css            */import"./x-DpXYoJPd.js";import"./createLucideIcon-SdjYaA-R.js";function A({payments:n}){const[f,o]=h.useState(null),{showToast:d}=b();h.useEffect(()=>{const e=n.filter(t=>t.paid);o(e)},[n]);const i=1800,m=async(e,t,l)=>{const s=document.querySelector('meta[name="csrf-token"]')?.content,p=`/pembayaran/${t}/${e}`;try{const c=await fetch(p,{method:"POST",headers:{"X-CSRF-TOKEN":s,"Content-Type":"application/json"}});let u=t=="check"?"mengonfirmasi":"membatalkan";return c.ok?(d(t=="check"?"success":"warn","Berhasil!","Berhasil "+u+" pembayaran "+l),!0):(d("error","Gagal!","Gagal "+u+" pembayaran "+l),!1)}catch{return d("error","Gagal!","Gagal "+textsa+" pembayaran "+l),!1}finally{setTimeout(()=>{y.reload({only:["payments"],preserveScroll:!0}),console.log(`[Inertia] Triggering partial reload after ${i}ms delay.`)},i)}},x=e=>{const{paid:t,verified:l,invoice:s}=e;return t?a.jsxs("div",{className:"flex w-full justify-between text-xs md:text-sm",children:[a.jsx("span",{className:"font-medium text-green-600",children:"Sudah"}),s?a.jsx(g,{href:s,target:"_blank",className:"rounded-md bg-emerald-500 px-2 py-1 text-white hover:bg-emerald-600",children:"Bukti"}):a.jsx("h1",{className:"rounded-md bg-blue-500 px-2 py-1 text-white hover:bg-blue-600",children:"Cash"})]}):s?a.jsxs("div",{className:"flex w-full justify-between text-xs md:text-sm",children:[a.jsx("span",{className:"font-medium text-yellow-600",children:"Menunggu"}),a.jsx("a",{target:"_blank",href:s,className:"rounded-md bg-emerald-500 px-2 py-1 text-white hover:bg-emerald-600",children:"Bukti"})]}):a.jsx("span",{className:"font-medium text-red-600",children:"Belum"})};return a.jsx(j,{children:a.jsx("div",{children:a.jsxs(w,{value:n,selection:f,onSelectionChange:e=>o(e.value),onRowSelect:e=>m(e.data.code,"check",e.data.name),onRowUnselect:e=>m(e.data.code,"uncheck",e.data.name),dataKey:"id",children:[a.jsx(r,{selectionMode:"multiple",headerStyle:{width:"3em"}}),a.jsx(r,{sortable:!0,field:"name",header:"Name"}),a.jsx(r,{headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell",sortable:!0,sortField:"office.name",header:"Asal",style:{minWidth:"150px"},body:e=>`${e.office.type} ${e.office.name}`}),a.jsx(r,{sortable:!0,sortField:"paid",header:"Pembayaran",body:x}),a.jsx(r,{headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell",field:"employment.name",header:"Posisi",style:{minWidth:"100px"}})]})})})}export{A as default};
