import{r as o,j as e}from"./app-DvQi-oSg.js";import{A as w}from"./admin-CEf17Bdz.js";import{U as p}from"./user-CrTkDvRr.js";import{c as k}from"./createLucideIcon-Cwlu6IQ5.js";import{C as P}from"./circle-alert-Cz15rZ1q.js";import{P as C}from"./phone-DYpcV6OK.js";import{B as _}from"./briefcase-CxqxHxxc.js";import{C as U}from"./calendar-CBHfIufG.js";import{S}from"./save-CklIjU51.js";import{X as z}from"./x-BBVD0gpj.js";/* empty css            *//**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],A=k("upload",F);function R({employments:h,user:u,offices:g}){const m=u,[r,b]=o.useState(m),[M,f]=o.useState(m.avatar),[c,x]=o.useState(!1),[a,d]=o.useState({}),n=s=>{const{name:t,value:i}=s.target;b(l=>({...l,[t]:i})),a[t]&&d(l=>({...l,[t]:null}))},j=s=>{const t=s.target.files?.[0];if(t){if(t.size>2048*1024){d(l=>({...l,avatar:"Ukuran file maksimal 2MB"}));return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type)){d(l=>({...l,avatar:"Format file harus JPG, PNG, atau WebP"}));return}const i=new FileReader;i.onloadend=()=>{f(i.result)},i.readAsDataURL(t),d(l=>({...l,avatar:null}))}},v=()=>{const s={};return r.name.trim()||(s.name="Nama wajib diisi"),r.phone.trim()||(s.phone="Nomor telepon wajib diisi"),r.employment_id||(s.employment_id="Jabatan wajib dipilih"),r.office_id||(s.office_id="Utusan wajib dipilih"),(!r.capsize||r.capsize<50||r.capsize>70)&&(s.capsize="Ukuran peci harus antara 50-70"),r.arrive||(s.arrive="Tanggal kedatangan wajib diisi"),r.depart||(s.depart="Tanggal kepulangan wajib diisi"),r.depart<r.arrive&&(s.depart="Tanggal kepulangan harus setelah kedatangan"),d(s),Object.keys(s).length===0},N=async s=>{s.preventDefault(),v()&&(x(!0),setTimeout(()=>{x(!1),alert("Data peserta berhasil diperbarui!")},1500))},y=()=>{confirm("Batalkan perubahan? Data yang belum disimpan akan hilang.")&&window.history.back()};return e.jsx(w,{children:e.jsx("div",{className:"min-h-screen p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Edit Data Peserta"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Perbarui informasi peserta Muswil VI Hidayatullah"})]}),e.jsx("div",{className:"rounded-lg bg-emerald-100 px-4 py-2",children:e.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:["Kode: ",r.code]})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(p,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Foto Profil"]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 w-32 overflow-hidden rounded-2xl border-4 border-gray-100 shadow-md",children:e.jsx("img",{src:r.avatar||"/api/placeholder/128/128",alt:"Avatar",className:"h-full w-full object-cover"})}),e.jsx("label",{htmlFor:"avatar-upload",className:"absolute -right-2 -bottom-2 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full bg-emerald-600 text-white shadow-lg transition hover:bg-emerald-700",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:j,className:"hidden"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"mb-1 font-medium text-gray-700",children:"Upload foto peserta"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Format: JPG, PNG, WebP (Max 2MB)"}),a.avatar&&e.jsxs("p",{className:"mt-2 flex items-center text-sm text-red-600",children:[e.jsx(P,{className:"mr-1 h-4 w-4"}),a.avatar]})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(p,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Informasi Pribadi"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:n,className:`w-full rounded-lg border-2 ${a.name?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,placeholder:"Masukkan nama lengkap"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center text-sm font-medium text-gray-700",children:[e.jsx(C,{className:"mr-1 h-4 w-4"}),"Nomor Telepon *"]}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:n,className:`w-full rounded-lg border-2 ${a.phone?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,placeholder:"08xxxxxxxxxx"}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Ukuran Peci *"}),e.jsx("input",{type:"number",name:"capsize",value:r.capsize,onChange:n,className:`w-full rounded-lg border-2 ${a.capsize?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.capsize&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.capsize})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(_,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Informasi Organisasi"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Utusan *"}),e.jsxs("select",{name:"office_id",value:r.office_id,onChange:n,className:`w-full rounded-lg border-2 ${a.office_id?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,children:[e.jsx("option",{value:"",children:"Pilih Utusan"}),Object.entries(g).map(([s,t])=>e.jsx("optgroup",{label:s,children:t.map(i=>e.jsxs("option",{value:i.id,children:[i.type," ",i.name]},i.id))},s))]}),a.office_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.office_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Jabatan *"}),e.jsxs("select",{name:"employment_id",value:r.employment_id,onChange:n,className:`w-full rounded-lg border-2 ${a.employment_id?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,children:[e.jsx("option",{value:"",children:"Pilih Jabatan"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.employment_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.employment_id})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(U,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Jadwal Kehadiran"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Kedatangan *"}),e.jsx("input",{type:"date",name:"arrive",value:r.arrive,onChange:n,className:`w-full rounded-lg border-2 ${a.arrive?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.arrive&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.arrive})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Kepulangan *"}),e.jsx("input",{type:"date",name:"depart",value:r.depart,onChange:n,className:`w-full rounded-lg border-2 ${a.depart?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.depart&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.depart})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:c,className:"flex flex-1 items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-4 font-semibold text-white shadow-lg transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-5 w-5"}),"Simpan Perubahan"]})}),e.jsxs("button",{type:"button",onClick:y,className:"flex items-center justify-center gap-2 rounded-xl border-2 border-gray-300 bg-white px-6 py-4 font-semibold text-gray-700 transition hover:bg-gray-50",children:[e.jsx(z,{className:"h-5 w-5"}),"Batal"]})]})]})]})})})}export{R as default};
