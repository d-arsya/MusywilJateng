import{r as i,u as G,j as e,a as Q}from"./app-Djs60LFF.js";import{A as V}from"./admin-DJ7xsEeb.js";import{A as W}from"./avatar.esm-CVw3mBqy.js";import{B as j}from"./button.esm-CWWluKkH.js";import{D as k,C as l}from"./datatable.esm-DJVCp9EQ.js";import{C as Y,c as Z}from"./confirmdialog.esm-BYBThObb.js";import{D as z}from"./dropdown.esm-C6C0xStL.js";import{I as L}from"./inputtext.esm-Dc2iymSP.js";import{T as b}from"./tag.esm-C-wzSItE.js";import{A as ee}from"./arrow-left-D1lqXLwG.js";import{U as v}from"./users-DVk6JqP9.js";import{U as m}from"./user-plus-CGBO8xms.js";import{U as se}from"./user-x-DgcgxUth.js";import{B as ae}from"./briefcase-CvVir1sr.js";/* empty css            */import"./x-D9f2VJcr.js";import"./createLucideIcon-CQDTXXfE.js";import"./overlayservice.esm-BESOVs4R.js";import"./dialog.esm-DK-LZKpU.js";const ye=({meeting:t,offices:U,employments:T,allUsers:N})=>{const[x,D]=i.useState(null),[h,E]=i.useState(null),[g,F]=i.useState(""),[r,P]=i.useState(""),[o,B]=i.useState([]),[n,O]=i.useState([]),p=N.filter(s=>s.assigned),y=N.filter(s=>!s.assigned),{put:f}=G(null),I=()=>{Q.get("/admin/kegiatan")},K=()=>{f("/admin/kegiatan/assign/"+t.code+"?users="+o.join(","),{onError:s=>console.log(s)})},M=()=>{const s=w();s.length!==0&&Z({message:`Assign ${s.length} peserta sesuai filter ke kegiatan ini?`,header:"Konfirmasi Assign",icon:"pi pi-check-circle",acceptLabel:"Assign",rejectLabel:"Batal",acceptClassName:"p-button-success",accept:()=>{const a=s.map(d=>d.id);f("/admin/kegiatan/assign/"+t.code+"?users="+a.join(","),{onError:d=>console.log(d)})}})},H=()=>{if(n.length===0)return;const s=n.map(a=>a.id);f("/admin/kegiatan/unassign/"+t.code+"?users="+s.join(","),{onError:a=>console.log(a)})},w=()=>y.filter(s=>{const a=s.name.toLowerCase().includes(g.toLowerCase())||s.phone.includes(g),d=!x||s.office.id===x.id,q=!h||s.employment.id===h.id;return a&&d&&q}),J=()=>p.filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.phone.includes(r))||u.office.name.toLowerCase().includes(r.toLowerCase())||u.office.type.toLowerCase().includes(r.toLowerCase()),c=w(),A=J(),C=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{image:user.avatar||void 0,label:user.avatar?void 0:user.name.charAt(0),size:"normal",shape:"circle",className:"bg-emerald-600 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.phone})]})]}),S=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.office.name})]}),_=s=>{const a={Pembina:"info",Pengurus:"success",Pengawas:"warning",Anggota:"secondary"};return e.jsx(b,{value:s.employment.name,severity:a[s.employment.name]||"secondary"})},$=s=>s.attended?e.jsx(b,{value:"Hadir",severity:"success",icon:"pi pi-check"}):e.jsx(b,{value:"Belum",severity:"secondary"}),R=U.map(s=>({label:s.type+" "+s.name,value:s})),X=T.map(s=>({label:s.name,value:s}));return e.jsxs(V,{children:[e.jsx(Y,{}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:I,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(ee,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Detail Kegiatan"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{children:t.name}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Assign Peserta"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Assign Peserta"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:[t.name," •"," ",new Date(t.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," ","• ",t.start_time.slice(0,5)," - ",t.end_time.slice(0,5)]})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Assigned"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:p.length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(v,{className:"text-emerald-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Available"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:y.length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(m,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Sudah Check-in"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:p.filter(s=>s.attended).length})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(v,{className:"text-orange-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-blue-50 p-4",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(m,{className:"text-blue-600",size:20}),"Peserta Tersedia (",c.length,")"]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(L,{placeholder:"Cari nama atau telepon...",value:g,onChange:s=>F(s.target.value),className:"w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(z,{value:x,options:R,onChange:s=>D(s.value),placeholder:"Filter Utusan",className:"w-full",showClear:!0}),e.jsx(z,{value:h,options:X,onChange:s=>E(s.value),placeholder:"Filter Jabatan",className:"w-full",showClear:!0})]})]})]}),o.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-emerald-600 p-3 text-white",children:[e.jsxs("span",{className:"font-semibold",children:[o.length," dipilih"]}),e.jsx(j,{label:"Assign Selected",icon:e.jsx(m,{size:14}),className:"p-button-sm border-0 bg-white text-emerald-600",onClick:K})]}),e.jsx("div",{className:"p-4",children:e.jsx(j,{label:`Assign Semua Sesuai Filter (${c.length})`,icon:e.jsx(m,{size:16}),className:"p-button-success mb-3 w-full",onClick:M,disabled:c.length===0})}),e.jsxs(k,{value:c,selection:c.filter(s=>o.includes(s.id)),onSelectionChange:s=>B(s.value.map(a=>a.id)),dataKey:"id",emptyMessage:"Tidak ada peserta tersedia",scrollable:!0,scrollHeight:"500px",className:"text-sm",children:[e.jsx(l,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(l,{field:"name",header:"Nama",body:C}),e.jsx(l,{field:"office.name",header:"Utusan",body:S}),e.jsx(l,{field:"employment.name",header:"Jabatan",body:_})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-gray-200 bg-emerald-50 p-4",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800",children:[e.jsx(v,{className:"text-emerald-600",size:20}),"Peserta Assigned (",A.length,")"]})}),e.jsx(L,{placeholder:"Cari nama, Utusan, atau telepon...",value:r,onChange:s=>P(s.target.value),className:"w-full"})]}),n.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-red-600 p-3 text-white",children:[e.jsxs("span",{className:"font-semibold",children:[n.length," dipilih"]}),e.jsx(j,{label:"Unassign Selected",icon:e.jsx(se,{size:14}),className:"p-button-sm border-0 bg-white text-red-600",onClick:H})]}),e.jsxs(k,{value:A,selection:n,onSelectionChange:s=>O(s.value),dataKey:"id",scrollable:!0,scrollHeight:"500px",virtualScrollerOptions:{itemSize:40},lazy:!0,className:"text-sm",children:[e.jsx(l,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(l,{field:"name",header:"Nama",body:C}),e.jsx(l,{field:"office.name",header:"Utusan",body:S}),e.jsx(l,{header:"Status",body:$})]})]})]})]})};export{ye as default};
