import{r as m,b as V,P as $,C as Y,c as W,O as x,d as F,D as _,u as q,j as e,a as K}from"./app-DMqxqPJM.js";import{A as G}from"./admin-BjmkL1yy.js";import{T as Q,B as O}from"./button.esm-C0xj6u3o.js";import{D as X}from"./dropdown.esm-CQUAa7zv.js";import{K as B,I as g}from"./inputtext.esm-CqZLBaoz.js";import{A as Z}from"./arrow-left-lPMXmSKX.js";import{F as N}from"./file-text-BXM9SCy9.js";import{C as z}from"./calendar-DAmSN12J.js";import{C as D}from"./clock-BzdlqY_5.js";import{M as E}from"./map-pin-B3-gobsy.js";import{S as ee}from"./save-Ojj7FpTD.js";/* empty css            */import"./x-DJIJzLN8.js";import"./createLucideIcon-DqFWOxZ4.js";import"./overlayservice.esm-u3reRXgZ.js";function C(){return C=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)({}).hasOwnProperty.call(a,l)&&(n[l]=a[l])}return n},C.apply(null,arguments)}function b(n){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},b(n)}function ae(n,s){if(b(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var l=a.call(n,s);if(b(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}function te(n){var s=ae(n,"string");return b(s)=="symbol"?s:s+""}function se(n,s,a){return(s=te(s))in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}var ne={root:function(s){var a=s.props,l=s.context,t=s.isFilled;return F("p-inputtextarea p-inputtext p-component",{"p-disabled":a.disabled,"p-filled":t,"p-inputtextarea-resizable":a.autoResize,"p-invalid":a.invalid,"p-variant-filled":a.variant?a.variant==="filled":l&&l.inputStyle==="filled"})}},le=`
@layer primereact {
    .p-inputtextarea-resizable {
        overflow: hidden;
        resize: none;
    }
    
    .p-fluid .p-inputtextarea {
        width: 100%;
    }
}
`,k=Y.extend({defaultProps:{__TYPE:"InputTextarea",__parentMetadata:null,autoResize:!1,invalid:!1,variant:null,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0,className:null},css:{classes:ne,styles:le}});function I(n,s){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);s&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,l)}return a}function T(n){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?I(Object(a),!0).forEach(function(l){se(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}var R=m.memo(m.forwardRef(function(n,s){var a=V(),l=m.useContext($),t=k.getProps(n,l),d=m.useRef(s),o=m.useRef(0),f=k.setMetaData(T(T({props:t},t.__parentMetadata),{},{context:{disabled:t.disabled}})),p=f.ptm,j=f.cx,y=f.isUnstyled;W(k.css.styles,y,{name:"inputtextarea"});var w=function(r){t.autoResize&&h(),t.onFocus&&t.onFocus(r)},v=function(r){t.autoResize&&h(),t.onBlur&&t.onBlur(r)},P=function(r){t.autoResize&&h(),t.onKeyUp&&t.onKeyUp(r)},S=function(r){t.onKeyDown&&t.onKeyDown(r),t.keyfilter&&B.onKeyPress(r,t.keyfilter,t.validateOnly)},i=function(r){t.onBeforeInput&&t.onBeforeInput(r),t.keyfilter&&B.onBeforeInput(r,t.keyfilter,t.validateOnly)},U=function(r){t.onPaste&&t.onPaste(r),t.keyfilter&&B.onPaste(r,t.keyfilter,t.validateOnly)},M=function(r){var c=r.target;t.autoResize&&h(x.isEmpty(c.value)),t.onInput&&t.onInput(r),x.isNotEmpty(c.value)?_.addClass(c,"p-filled"):_.removeClass(c,"p-filled")},h=function(r){var c=d.current;c&&H()&&(o.current||(o.current=c.scrollHeight,c.style.overflow="hidden"),(o.current!==c.scrollHeight||r)&&(c.style.height="",c.style.height=c.scrollHeight+"px",parseFloat(c.style.height)>=parseFloat(c.style.maxHeight)?(c.style.overflowY="scroll",c.style.height=c.style.maxHeight):c.style.overflow="hidden",o.current=c.scrollHeight))},H=function(){if(_.isVisible(d.current)){var r=d.current.getBoundingClientRect();return r.width>0&&r.height>0}return!1};m.useEffect(function(){x.combinedRefs(d,s)},[d,s]),m.useEffect(function(){t.autoResize&&h(!0)},[t.autoResize,t.value]);var A=m.useMemo(function(){return x.isNotEmpty(t.value)||x.isNotEmpty(t.defaultValue)},[t.value,t.defaultValue]),J=x.isNotEmpty(t.tooltip),L=a({ref:d,className:F(t.className,j("root",{context:l,isFilled:A})),onFocus:w,onBlur:v,onKeyUp:P,onKeyDown:S,onBeforeInput:i,onInput:M,onPaste:U},k.getOtherProps(t),p("root"));return m.createElement(m.Fragment,null,m.createElement("textarea",L),J&&m.createElement(Q,C({target:d,content:t.tooltip,pt:p("tooltip")},t.tooltipOptions)))}));R.displayName="InputTextarea";const ve=({isEdit:n=!1,meeting:s=null})=>{const{data:a,setData:l,post:t,put:d}=q({name:s?.name||"",date:s?.date||"",start_time:s?.start_time?.slice(0,5)||"",end_time:s?.end_time?.slice(0,5)||"",room:s?.room||"",description:s?.description||"",status:s?.status||"Belum"}),[o,f]=m.useState({}),[p,j]=m.useState(!1),y=()=>{const i={};return a.name.trim()||(i.name="Judul kegiatan wajib diisi"),a.date||(i.date="Tanggal wajib diisi"),a.start_time||(i.start_time="Jam mulai wajib diisi"),a.end_time||(i.end_time="Jam selesai wajib diisi"),a.start_time&&a.end_time&&a.start_time>=a.end_time&&(i.end_time="Jam selesai harus lebih besar dari jam mulai"),a.room.trim()||(i.room="Lokasi wajib diisi"),f(i),Object.keys(i).length===0},w=()=>{y()&&(n?(console.log(a),d("/admin/kegiatan/"+s.code,{onError:i=>{console.log("Validation Errors:",i)},onSuccess:()=>console.log("SUCCESS")})):t("/admin/kegiatan",{onError:i=>{console.log("Validation Errors:",i)},onSuccess:()=>console.log("SUCCESS")}))},v=()=>{K.get("/admin/kegiatan")},P=()=>{y()&&(j(!0),setTimeout(()=>{console.log("Submit data:",a),console.log("Navigate to assign participants page"),j(!1),K.get("/admin/kegiatan/assign")},1e3))},S=[{label:"Belum Dimulai",value:"Belum"},{label:"Sedang Berlangsung",value:"Sedang"},{label:"Selesai",value:"Telah"}];return e.jsxs(G,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:v,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(Z,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:n?"Edit Kegiatan":"Tambah Kegiatan Baru"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:n?"Edit Kegiatan":"Tambah Kegiatan Baru"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Judul Kegiatan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(N,{size:16})}),e.jsx(g,{value:a.name,onChange:i=>l("name",i.target.value),placeholder:"Contoh: Pembukaan Munas VI",className:`w-full ${o.name?"p-invalid":""}`})]}),o.name&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Tanggal ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(z,{size:16})}),e.jsx(g,{type:"date",value:a.date,onChange:i=>l("date",i.target.value),className:`w-full ${o.date?"p-invalid":""}`})]}),o.date&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(X,{value:a.status,options:S,onChange:i=>l("status",i.value),placeholder:"Pilih status",className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jam Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(D,{size:16})}),e.jsx(g,{type:"time",value:a.start_time,onChange:i=>l("start_time",i.target.value),className:`w-full ${o.start_time?"p-invalid":""}`})]}),o.start_time&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.start_time})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Jam Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(D,{size:16})}),e.jsx(g,{type:"time",value:a.end_time,onChange:i=>l("end_time",i.target.value),className:`w-full ${o.end_time?"p-invalid":""}`})]}),o.end_time&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.end_time})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Lokasi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"p-inputgroup",children:[e.jsx("span",{className:"p-inputgroup-addon",children:e.jsx(E,{size:16})}),e.jsx(g,{value:a.room,onChange:i=>l("room",i.target.value),placeholder:"Contoh: Aula Utama",className:`w-full ${o.room?"p-invalid":""}`})]}),o.room&&e.jsx("small",{className:"mt-1 block text-red-500",children:o.room})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Deskripsi (Opsional)"}),e.jsx(R,{value:a.description,onChange:i=>l("description",i.target.value),placeholder:"Tambahkan deskripsi atau catatan tambahan...",rows:4,className:"w-full"})]})]}),e.jsx("div",{className:"mt-6 rounded-lg border border-blue-200 bg-blue-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-blue-100",children:e.jsx(N,{className:"text-blue-600",size:16})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"mb-1 text-sm font-medium text-blue-800",children:"Informasi"}),e.jsxs("ul",{className:"space-y-1 text-sm text-blue-700",children:[e.jsx("li",{children:"• Kegiatan dapat diedit kapan saja, bahkan setelah ada peserta yang assigned atau check-in"}),e.jsx("li",{children:"• Kegiatan hanya bisa dihapus jika belum ada peserta yang hadir (check-in)"}),e.jsx("li",{children:"• Status dapat diubah sesuai kondisi kegiatan: Belum Dimulai, Sedang Berlangsung, atau Selesai"})]})]})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx(O,{label:"Batal",className:"p-button-text",onClick:v,disabled:p}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{label:n?"Simpan Perubahan":"Simpan",icon:e.jsx(ee,{size:16}),className:"p-button-outlined",onClick:w,loading:p}),!n&&e.jsx(O,{label:"Simpan & Lanjut Plot Peserta",icon:"pi pi-arrow-right",iconPos:"right",className:"p-button-success",onClick:P,loading:p})]})]})]}),a.name&&e.jsxs("div",{className:"mt-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Preview Kegiatan"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Judul"}),e.jsx("p",{className:"font-semibold text-gray-800",children:a.name||"-"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tanggal & Waktu"}),e.jsxs("p",{className:"font-semibold text-gray-800",children:[a.date?new Date(a.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"-",a.start_time&&a.end_time&&e.jsxs("span",{className:"ml-2",children:["(",a.start_time," - ",a.end_time,")"]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Lokasi"}),e.jsx("p",{className:"font-semibold text-gray-800",children:a.room||"-"})]})]}),a.description&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"mt-1 text-gray-500",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-800",children:a.description})]})]})]})]})]})};export{ve as default};
