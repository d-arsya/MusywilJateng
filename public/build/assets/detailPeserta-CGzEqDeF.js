import{u as w,r as o,j as e}from"./app-PLdOww6q.js";import{A as P}from"./admin-CfRuVo5U.js";import{U as p}from"./user-fwKivKhW.js";import{U as k}from"./upload-BdgmL58a.js";import{C}from"./circle-alert-CvKXasAW.js";import{P as U}from"./phone-DHY6D2Ev.js";import{B as S}from"./briefcase-BjNOm5wf.js";import{C as _}from"./calendar-B-SACNqt.js";import{S as F}from"./save-CvkOzB4r.js";import{X as A}from"./x-DIrLv6Py.js";/* empty css            */import"./createLucideIcon-DleWnz_l.js";function O({employments:h,user:u,offices:g}){const m=u,{data:t,setData:c,post:b}=w(m),[f,j]=o.useState(m.avatar),[x,D]=o.useState(!1),[a,d]=o.useState({}),n=s=>{const{name:r,value:l}=s.target;c(r,l)},N=s=>{const r=s.target.files?.[0];if(r){if(c("avatar",r),r.size>2048*1024){d(i=>({...i,avatar:"Ukuran file maksimal 2MB"}));return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type)){d(i=>({...i,avatar:"Format file harus JPG, PNG, atau WebP"}));return}const l=new FileReader;l.onloadend=()=>{j(l.result)},l.readAsDataURL(r),d(i=>({...i,avatar:null}))}},v=async s=>{console.log(t),s.preventDefault(),b("/admin/peserta/"+t.code,{onError:r=>console.log(r)})},y=()=>{confirm("Batalkan perubahan? Data yang belum disimpan akan hilang.")&&window.history.back()};return e.jsx(P,{children:e.jsx("div",{className:"min-h-screen p-4 md:p-8",children:e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Edit Data Peserta"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Perbarui informasi peserta Muswil VI Hidayatullah"})]}),e.jsx("div",{className:"rounded-lg bg-emerald-100 px-4 py-2",children:e.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:["Kode: ",t.code]})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(p,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Foto Profil"]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-32 w-32 overflow-hidden rounded-2xl border-4 border-gray-100 shadow-md",children:e.jsx("img",{src:f||"/assets/img/placeholder.webp",alt:"Avatar",className:"h-full w-full object-cover"})}),e.jsx("label",{htmlFor:"avatar-upload",className:"absolute -right-2 -bottom-2 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full bg-emerald-600 text-white shadow-lg transition hover:bg-emerald-700",children:e.jsx(k,{className:"h-5 w-5"})}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:N,className:"hidden"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"mb-1 font-medium text-gray-700",children:"Upload foto peserta"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Format: JPG, PNG, WebP (Max 2MB)"}),a.avatar&&e.jsxs("p",{className:"mt-2 flex items-center text-sm text-red-600",children:[e.jsx(C,{className:"mr-1 h-4 w-4"}),a.avatar]})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(p,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Informasi Pribadi"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Nama Lengkap *"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:n,className:`w-full rounded-lg border-2 ${a.name?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,placeholder:"Masukkan nama lengkap"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 flex items-center text-sm font-medium text-gray-700",children:[e.jsx(U,{className:"mr-1 h-4 w-4"}),"Nomor Telepon *"]}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:n,className:`w-full rounded-lg border-2 ${a.phone?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,placeholder:"08xxxxxxxxxx"}),a.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Ukuran Peci *"}),e.jsx("input",{type:"number",name:"capsize",value:t.capsize,onChange:n,className:`w-full rounded-lg border-2 ${a.capsize?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.capsize&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.capsize})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(S,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Informasi Organisasi"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Utusan *"}),e.jsxs("select",{name:"office_id",value:t.office_id,onChange:n,className:`w-full rounded-lg border-2 ${a.office_id?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,children:[e.jsx("option",{value:"",children:"Pilih Utusan"}),Object.entries(g).map(([s,r])=>e.jsx("optgroup",{label:s,children:r.map(l=>e.jsxs("option",{value:l.id,children:[l.type," ",l.name]},l.id))},s))]}),a.office_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.office_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Jabatan *"}),e.jsxs("select",{name:"employment_id",value:t.employment_id,onChange:n,className:`w-full rounded-lg border-2 ${a.employment_id?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`,children:[e.jsx("option",{value:"",children:"Pilih Jabatan"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.employment_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.employment_id})]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-lg font-semibold text-gray-800",children:[e.jsx(_,{className:"mr-2 h-5 w-5 text-emerald-600"}),"Jadwal Kehadiran"]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Kedatangan *"}),e.jsx("input",{type:"date",name:"arrive",value:t.arrive,onChange:n,className:`w-full rounded-lg border-2 ${a.arrive?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.arrive&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.arrive})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Tanggal Kepulangan *"}),e.jsx("input",{type:"date",name:"depart",value:t.depart,onChange:n,className:`w-full rounded-lg border-2 ${a.depart?"border-red-300":"border-gray-200"} px-4 py-3 transition focus:border-emerald-500 focus:outline-none`}),a.depart&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.depart})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:x,className:"flex flex-1 items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-4 font-semibold text-white shadow-lg transition hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-5 w-5"}),"Simpan Perubahan"]})}),e.jsxs("button",{type:"button",onClick:y,className:"flex items-center justify-center gap-2 rounded-xl border-2 border-gray-300 bg-white px-6 py-4 font-semibold text-gray-700 transition hover:bg-gray-50",children:[e.jsx(A,{className:"h-5 w-5"}),"Batal"]})]})]})]})})})}export{O as default};
