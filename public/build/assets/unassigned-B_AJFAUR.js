import{r as n,u as Q,j as e,a as q}from"./app-CAlMH3Bd.js";import{A as V}from"./admin-CvKnKrZz.js";import{A as W}from"./avatar.esm-DU-4YRH0.js";import{B as i}from"./button.esm-B7TPQ3Sg.js";import{D as X,C as o}from"./datatable.esm-Bstrrd5z.js";import{D as Y}from"./dialog.esm-CbbMZrUy.js";import{D as x}from"./dropdown.esm-zvJOsvQw.js";import{I as Z}from"./inputtext.esm-DshyNRYn.js";import{T as ee}from"./tag.esm-KrvSazQ3.js";import{A as se}from"./arrow-left-COaJpnRq.js";import{U as y}from"./users-CAW0-h1D.js";import{U as w}from"./user-plus-Ce12IEax.js";import{D as ae}from"./door-open-51Q_lQXg.js";import{P as le}from"./phone-BJwVws0G.js";import{B as te}from"./briefcase-DolPki9p.js";/* empty css            */import"./x-18ieLOZ0.js";import"./createLucideIcon-DfM1_4bx.js";import"./overlayservice.esm-B-QSVio9.js";const ke=({users:v,employments:k,buildings:C,offices:S})=>{const[P,r]=n.useState(!1),[a,h]=n.useState([]),[m,A]=n.useState(""),[u,T]=n.useState(null),[g,B]=n.useState(null),[p,f]=n.useState(null),[l,c]=n.useState(null),[b,j]=n.useState([]),{put:D}=Q(null),U=()=>{q.get("/admin/penginapan")},O=s=>{h([s.id]),f(null),c(null),j([]),r(!0)},z=()=>{a.length!==0&&(f(null),c(null),j([]),r(!0))},K=s=>{f(s),j(s?s.rooms:[]),c(null)},L=()=>{l&&(console.log("HALO"),D(`/admin/penginapan/assigned/${l.id}?code=${a.join(",")}`,{onFinish:()=>r(!1)}))},$=()=>{h([])},F=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{label:s.name.charAt(0),size:"large",shape:"circle",className:"bg-orange-600 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(le,{size:12}),s.phone]})]})]}),R=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.office.name})]}),E=s=>{const t={Pembina:"info",Pengurus:"success",Pengawas:"warning",Anggota:"secondary"};return e.jsx(ee,{value:s.employment.name,severity:t[s.employment.name]||"secondary"})},I=s=>e.jsx(i,{label:"Assign",icon:e.jsx(w,{size:14}),className:"p-button-sm p-button-success",onClick:()=>O(s)}),N=v.filter(s=>{const t=s.name.toLowerCase().includes(m.toLowerCase())||s.phone.includes(m)||s.office.name.toLowerCase().includes(m.toLowerCase()),d=!u||s.office.id===u.id,M=!g||s.employment.id===g.id;return t&&d&&M}).sort((s,t)=>{const d=s.name.localeCompare(t.name);return d!==0?d:s.office.name.localeCompare(t.office.name)}),J=C.map(s=>({label:`${s.name} (${s.rooms.length} kamar)`,value:s})),_=b.map(s=>({label:`${s.name} (${s.users_count} orang)`,value:s})),G=S.map(s=>({label:s.name,value:s})),H=k.map(s=>({label:s.name,value:s}));return e.jsxs(V,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:U,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(se,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"â€º"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Peserta Belum Terplotting"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Peserta Belum Terplotting"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Daftar peserta yang belum mendapatkan kamar penginapan"})]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-1",children:e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Belum Terplotting"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[v.length," Peserta"]})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(y,{className:"text-orange-600",size:24})})]})})}),a.length>0&&e.jsx("div",{className:"mb-6 rounded-lg bg-emerald-600 p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{size:20}),e.jsxs("span",{className:"font-semibold",children:[a.length," peserta dipilih"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{label:"Assign Semua ke Kamar yang Sama",icon:e.jsx(w,{size:16}),className:"p-button-sm border-0 bg-white text-emerald-600",onClick:z}),e.jsx(i,{label:"Batal Pilihan",className:"p-button-sm p-button-outlined border-white text-white hover:bg-white/10",onClick:$})]})]})}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Cari Peserta"}),e.jsx("span",{className:"p-input-icon-left w-full",children:e.jsx(Z,{placeholder:"Nama, telepon, atau utusan...",value:m,onChange:s=>A(s.target.value),className:"w-full"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Utusan"}),e.jsx(x,{value:u,options:G,onChange:s=>T(s.value),placeholder:"Semua Utusan",className:"w-full",showClear:!0,filter:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Jabatan"}),e.jsx(x,{value:g,options:H,onChange:s=>B(s.value),placeholder:"Semua Jabatan",className:"w-full",showClear:!0})]})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Daftar Peserta (",N.length,")"]})}),e.jsxs(X,{value:N,selection:N.filter(s=>a.includes(s.id)),onSelectionChange:s=>h(s.value.map(t=>t.id)),dataKey:"id",emptyMessage:"Tidak ada peserta yang belum terplotting",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],className:"text-sm",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(o,{field:"name",header:"Nama Peserta",body:F}),e.jsx(o,{field:"office.name",header:"Utusan",body:R}),e.jsx(o,{field:"employment.name",header:"Jabatan",body:E,style:{width:"150px"}}),e.jsx(o,{header:"Aksi",body:I,style:{width:"150px"}})]})]}),e.jsx(Y,{header:a.length===1?"Assign Peserta ke Kamar":`Assign ${a.length} Peserta ke Kamar`,visible:P,style:{width:"550px"},onHide:()=>r(!1),footer:e.jsxs("div",{children:[e.jsx(i,{label:"Batal",className:"p-button-text",onClick:()=>r(!1)}),e.jsx(i,{label:"Assign ke Kamar",className:"p-button-success",onClick:L,disabled:!l})]}),children:e.jsxs("div",{className:"flex h-72 flex-col gap-4 pt-4",children:[a.length>1&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[a.length," peserta"]})," akan di-assign ke kamar yang sama"]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["1. Pilih Gedung ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{value:p,options:J,onChange:s=>K(s.value),placeholder:"Pilih gedung",className:"w-full",filter:!0})]}),p&&e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["2. Pilih Kamar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{value:l,options:_,onChange:s=>c(s.value),placeholder:"Pilih kamar",className:"w-full",disabled:b.length===0,filter:!0}),b.length===0&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Gedung ini belum memiliki kamar. Tambahkan kamar terlebih dahulu."})]}),l&&e.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(ae,{className:"text-emerald-600",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-1 font-semibold text-emerald-800",children:[p.name," - ",l.name]}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Saat ini: ",e.jsxs("strong",{children:[l.users_count," orang"]})]}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Setelah assign: ",e.jsxs("strong",{children:[l.users_count+a.length," orang"]})]})]})]})})]})})]})};export{ke as default};
