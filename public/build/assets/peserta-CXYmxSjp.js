import{r as g,j as e,L as v}from"./app-CQdouhZC.js";import{A as w}from"./admin-CcQFpYk8.js";import{A as P}from"./avatar.esm-BTEZHjlc.js";import{B as u}from"./badge.esm-G-Ka6ssl.js";import{D as C,C as c}from"./datatable.esm-DRFASiBP.js";import{D as k}from"./dropdown.esm-XeuKv2xC.js";import{I as A}from"./inputtext.esm-ytSNqhYA.js";import{T as D}from"./tag.esm-Bvqjl7-E.js";import{U as h}from"./users-fSeNOl3R.js";import{C as T}from"./circle-check-B-g5P-bC.js";import{C as L}from"./clock-D5YsfNTw.js";import{C as S}from"./calendar-CVLNoqOM.js";import{P as $}from"./phone-D0wBuKsm.js";import{U as F}from"./user-check-BR_znJPs.js";/* empty css            */import"./x-S6WY0jv3.js";import"./createLucideIcon-D0gMw7uE.js";import"./button.esm-Cx5XiPd_.js";import"./overlayservice.esm-SwopIPjq.js";let f={};const U=a=>{if(!a||!a.query&&!a.mergeQuery)return"";const s=a.query??a.mergeQuery,n=a.mergeQuery!==void 0,m=l=>l===!0?"1":l===!1?"0":l.toString(),r=new URLSearchParams(n&&typeof window<"u"?window.location.search:"");for(const l in s){if(s[l]===void 0||s[l]===null){r.delete(l);continue}if(Array.isArray(s[l]))r.has(`${l}[]`)&&r.delete(`${l}[]`),s[l].forEach(o=>{r.append(`${l}[]`,o.toString())});else if(typeof s[l]=="object"){r.forEach((o,x)=>{x.startsWith(`${l}[`)&&r.delete(x)});for(const o in s[l])typeof s[l][o]>"u"||["string","number","boolean"].includes(typeof s[l][o])&&r.set(`${l}[${o}]`,m(s[l][o]))}else r.set(l,m(s[l]))}const i=r.toString();return i.length>0?`?${i}`:""},E=a=>{const s={...a??{}};for(const n in f)s[n]===void 0&&f[n]!==void 0&&(s[n]=f[n]);return s},d=(a,s)=>({url:d.url(a,s),method:"get"});d.definition={methods:["get","head"],url:"/admin/peserta/{user}"};d.url=(a,s)=>{(typeof a=="string"||typeof a=="number")&&(a={user:a}),typeof a=="object"&&!Array.isArray(a)&&"code"in a&&(a={user:a.code}),Array.isArray(a)&&(a={user:a[0]}),a=E(a);const n={user:typeof a.user=="object"?a.user.code:a.user};return d.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+U(s)};d.get=(a,s)=>({url:d.url(a,s),method:"get"});d.head=(a,s)=>({url:d.url(a,s),method:"head"});function ae({users:a}){const[s,n]=g.useState(""),[m,r]=g.useState(null),i={total:a.length,verified:a.filter(t=>t.paid).length,pending:a.filter(t=>!t.paid&&t.invoice!=null).length,arriving:a.filter(t=>new Date(t.arrive)<=new Date).length},l=[{label:"Semua Jabatan",value:null},{label:"Pembina",value:"Pembina"},{label:"Pengurus",value:"Pengurus"},{label:"Pengawas",value:"Pengawas"},{label:"Anggota",value:"Anggota"}],o=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(h,{className:"h-8 w-8 opacity-80"}),e.jsx(u,{value:i.total,severity:"info",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Peserta"}),e.jsx("p",{className:"text-2xl font-bold",children:i.total})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(T,{className:"h-8 w-8 opacity-80"}),e.jsx(u,{value:i.verified,severity:"success",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Terverifikasi"}),e.jsx("p",{className:"text-2xl font-bold",children:i.verified})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(L,{className:"h-8 w-8 opacity-80"}),e.jsx(u,{value:i.pending,severity:"warning",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Menunggu"}),e.jsx("p",{className:"text-2xl font-bold",children:i.pending})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(S,{className:"h-8 w-8 opacity-80"}),e.jsx(u,{value:i.arriving,className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Sudah Tiba"}),e.jsx("p",{className:"text-2xl font-bold",children:i.arriving})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md lg:flex-row",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(A,{value:s,onChange:t=>n(t.target.value),placeholder:"Cari nama, utusan, atau nomor telepon...",className:"w-full pl-10"})}),e.jsx(k,{value:m,onChange:t=>r(t.value),options:l,placeholder:"Filter Jabatan",className:"w-full lg:w-48"})]})]}),x=t=>e.jsxs(v,{href:d(t.code),className:"-m-2 flex items-center space-x-3 rounded-lg p-2 transition hover:bg-gray-50",children:[e.jsx(P,{image:t.avatar||`https://ui-avatars.com/api/?name=${t.name}&background=10b981&color=fff`,shape:"circle",size:"large",className:"border-2 border-emerald-100 [&_img]:object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx($,{className:"mr-1 h-3 w-3"}),t.phone]})]})]}),b=t=>{const p={DPW:"info",DPD:"success",DMW:"warning",Kampus:"help",Orpen:"danger"};return e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{value:t.office.type,severity:p[t.office.type]||"info",className:"text-xs font-semibold"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t.office.name})]})},y=t=>{const p={Pembina:"bg-purple-100 text-purple-700 border-purple-200",Pengurus:"bg-blue-100 text-blue-700 border-blue-200",Pengawas:"bg-amber-100 text-amber-700 border-amber-200",Anggota:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsxs("span",{className:`inline-flex items-center rounded-full border-2 px-3 py-1 text-sm font-semibold ${p[t.employment.name]||p.Anggota}`,children:[e.jsx(F,{className:"mr-1 h-3 w-3"}),t.employment.name]})},j=t=>(console.log(t),e.jsxs("div",{className:"text-sm",children:[t.room?.building.name," ",e.jsx("br",{}),t.room?.name]})),N=m?a.filter(t=>t.employment.name===m):a;return e.jsx(w,{children:e.jsxs("div",{className:"space-y-6 p-2 md:p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center text-3xl font-bold text-gray-800",children:[e.jsx(h,{className:"mr-3 h-8 w-8 text-emerald-600"}),"Manajemen Peserta"]}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Muswil VI Hidayatullah 2025"})]})}),e.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs(C,{value:N,dataKey:"id",paginator:!0,rows:20,rowsPerPageOptions:[10,20,40,50,100,200,300,400],globalFilter:s,globalFilterFields:["name","office.name","phone"],header:o,emptyMessage:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(h,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Tidak ada data peserta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Silakan tambah peserta baru"})]}),className:"text-sm",stripedRows:!0,showGridlines:!0,responsiveLayout:"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Menampilkan {first} - {last} dari {totalRecords} peserta",children:[e.jsx(c,{body:x,header:"Peserta",sortable:!0,sortField:"name"}),e.jsx(c,{body:b,header:"Utusan",sortable:!0,sortField:"office.name",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell"}),e.jsx(c,{body:y,header:"Jabatan",sortable:!0,sortField:"employment.name",headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell"}),e.jsx(c,{field:"capsize",header:"Peci",sortable:!0,headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"}),e.jsx(c,{body:j,header:"Kamar",headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"})]})})]})})}export{ae as default};
