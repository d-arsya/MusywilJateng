import{r as m,u as Q,j as e,a as i}from"./app-CSO-cxpp.js";import{A as U}from"./admin-CT2KB149.js";import{B as n}from"./button.esm-ACUyvw5u.js";import{D as H,C as l}from"./datatable.esm-PDsTVL0p.js";import{C as I,c as W}from"./confirmdialog.esm-DkOIbiFJ.js";import{D as $}from"./dropdown.esm-Cy-l1WZ_.js";import{I as u}from"./inputtext.esm-Dowr2dsl.js";import{T as J}from"./tag.esm-DNfua_6p.js";import{C as h}from"./calendar-BlAFXeAC.js";import{C as O}from"./clock-DJdLXVIX.js";import{U as g}from"./users-CiOzobjc.js";import{C as R}from"./circle-check-big-C-SOMghF.js";import{P as V}from"./plus-JTWFNiJG.js";import{Q as q}from"./qr-code-B1PAsA08.js";import{U as G}from"./user-plus-B3Zbv-Zh.js";import{P as X,T as Y}from"./trash-2-8XRg3OZW.js";/* empty css            */import"./x-DbVGnjQd.js";import"./createLucideIcon-CC4qKH7c.js";import"./overlayservice.esm-CMOQkrwO.js";import"./dialog.esm-BibbKjOr.js";const Ne=({meetings:r})=>{const[d,p]=m.useState(""),[o,b]=m.useState(null),[c,j]=m.useState(""),{delete:f}=Q(null),N=r.length,y=r.filter(s=>s.status==="Belum").length,v=r.filter(s=>s.status==="Sedang").length,w=r.filter(s=>s.status==="Telah").length,C=()=>{i.get("/admin/kegiatan/create")},k=s=>{i.get("/admin/kegiatan/"+s.code+"/edit")},S=s=>{if(s.total_attended>0){alert("Tidak bisa menghapus kegiatan yang sudah ada peserta hadir!");return}W({message:`Apakah Anda yakin ingin menghapus "${s.name}"?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{f("/admin/kegiatan/"+s.code,{onError:t=>console.log(t)})}})},T=s=>{i.get("/admin/kegiatan/stats/"+s.code)},B=s=>{i.get("/admin/kegiatan/assign/"+s.code)},D=s=>{i.get("/admin/kegiatan/scan/"+s.code)},z=s=>e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 font-semibold text-gray-800",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(h,{size:12}),new Date(s.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),A=s=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:s.start_time.slice(0,5)})}),L=s=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:s.room})}),M=s=>{const t={Belum:{label:"Belum",severity:"info"},Sedang:{label:"Berlangsung",severity:"warning"},Telah:{label:"Selesai",severity:"success"}}[s.status];return e.jsx(J,{value:t.label,severity:t.severity})},_=s=>{const a=s.attendance_rate;let t="text-gray-600";return a>=80?t="text-emerald-600":a>=50?t="text-orange-600":a>0&&(t="text-red-600"),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx(g,{size:14,className:"text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.total_attended,"/",s.total_participants]})]}),e.jsxs("div",{className:`text-sm font-semibold ${t}`,children:[a,"%"]})]})},K=s=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{icon:e.jsx(q,{size:14}),className:"p-button-rounded p-button-text p-button-success p-button-xxl",onClick:()=>D(s),tooltip:"Buka Scanner",disabled:s.status==="Telah"}),e.jsx(n,{icon:e.jsx(G,{size:14}),className:"p-button-rounded p-button-text p-button-info p-button-xxl",onClick:()=>B(s),tooltip:"Assign Peserta"}),e.jsx(n,{icon:e.jsx(X,{size:14}),className:"p-button-rounded p-button-text p-button-xxl",onClick:()=>k(s),tooltip:"Edit"}),e.jsx(n,{icon:e.jsx(Y,{size:14}),className:"p-button-rounded p-button-text p-button-danger p-button-xxl",onClick:()=>S(s),tooltip:"Hapus",disabled:s.total_attended>0})]}),P=s=>e.jsx(n,{label:"Detail",className:"p-button-sm p-button-outlined",onClick:()=>T(s)}),x=r.filter(s=>{const a=s.name.toLowerCase().includes(d.toLowerCase())||s.room.toLowerCase().includes(d.toLowerCase()),t=!o||s.status===o.value,F=!c||s.date===c;return a&&t&&F}).sort((s,a)=>{const t=new Date(s.date)-new Date(a.date);return t!==0?t:s.start_time.localeCompare(a.start_time)}),E=[{label:"Belum Dimulai",value:"Belum"},{label:"Sedang Berlangsung",value:"Sedang"},{label:"Selesai",value:"Telah"}];return e.jsxs(U,{children:[e.jsx(I,{}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-800",children:"Manajemen Kegiatan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola jadwal kegiatan dan presensi peserta Munas"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Kegiatan"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(h,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Belum Dimulai"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:y})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(O,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Berlangsung"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:v})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(g,{className:"text-orange-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Selesai"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:w})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(R,{className:"text-emerald-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 items-end gap-4 md:grid-cols-8",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Cari Kegiatan"}),e.jsx("span",{className:"p-input-icon-left w-full",children:e.jsx(u,{placeholder:"Judul atau lokasi...",value:d,onChange:s=>p(s.target.value),className:"w-full"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Status"}),e.jsx($,{value:o,options:E,onChange:s=>b(s.value),placeholder:"Semua Status",className:"w-full",showClear:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Tanggal"}),e.jsx(u,{type:"date",value:c,onChange:s=>j(s.target.value),className:"w-full"})]}),e.jsx(n,{label:"Tambah",icon:e.jsx(V,{size:16}),className:"p-button-success h-max",onClick:C})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Daftar Kegiatan (",x.length,")"]})}),e.jsxs(H,{value:x,emptyMessage:"Belum ada kegiatan. Tambahkan kegiatan pertama!",className:"text-sm",children:[e.jsx(l,{field:"name",header:"Kegiatan",body:z,style:{minWidth:"250px"}}),e.jsx(l,{field:"start_time",header:"Waktu",body:A,style:{width:"150px"}}),e.jsx(l,{field:"room",header:"Lokasi",body:L,style:{width:"180px"}}),e.jsx(l,{field:"status",header:"Status",body:M,style:{width:"180px"}}),e.jsx(l,{header:"Kehadiran",body:_,style:{width:"120px"}}),e.jsx(l,{header:"Detail",body:P,style:{width:"140px"}}),e.jsx(l,{header:"Aksi",body:K,style:{width:"180px"}})]})]})]})};export{Ne as default};
