import{r as b,j as e,L as C}from"./app-1ValETXg.js";import{A as D}from"./admin-D5KBYqKl.js";import{A as k}from"./avatar.esm-D6DPbfbx.js";import{B as h}from"./badge.esm-BZTQHHqm.js";import{D as A,C as x}from"./datatable.esm-WMsIS_Fy.js";import{D as T}from"./dropdown.esm-BeO4a4Fv.js";import{I as L}from"./inputtext.esm-Bj6OkS9Z.js";import{T as S}from"./tag.esm-Do9TnLjK.js";import{U as u}from"./users-CdbYQ4sy.js";import{C as $}from"./circle-check-DpHjPoZx.js";import{C as F}from"./clock-BMhwnEwa.js";import{C as f}from"./calendar-C9uUAjbZ.js";import{P as U}from"./phone-BG7DZiL3.js";import{U as E}from"./user-check-B2PoqX6h.js";/* empty css            */import"./x-DFhPFww9.js";import"./createLucideIcon-BiGKgULC.js";import"./button.esm-DFXCpf41.js";import"./overlayservice.esm-Bl7SZKAZ.js";let g={};const R=a=>{if(!a||!a.query&&!a.mergeQuery)return"";const s=a.query??a.mergeQuery,i=a.mergeQuery!==void 0,m=r=>r===!0?"1":r===!1?"0":r.toString(),l=new URLSearchParams(i&&typeof window<"u"?window.location.search:"");for(const r in s){if(s[r]===void 0||s[r]===null){l.delete(r);continue}if(Array.isArray(s[r]))l.has(`${r}[]`)&&l.delete(`${r}[]`),s[r].forEach(o=>{l.append(`${r}[]`,o.toString())});else if(typeof s[r]=="object"){l.forEach((o,p)=>{p.startsWith(`${r}[`)&&l.delete(p)});for(const o in s[r])typeof s[r][o]>"u"||["string","number","boolean"].includes(typeof s[r][o])&&l.set(`${r}[${o}]`,m(s[r][o]))}else l.set(r,m(s[r]))}const n=l.toString();return n.length>0?`?${n}`:""},M=a=>{const s={...a??{}};for(const i in g)s[i]===void 0&&g[i]!==void 0&&(s[i]=g[i]);return s},d=(a,s)=>({url:d.url(a,s),method:"get"});d.definition={methods:["get","head"],url:"/admin/peserta/{user}"};d.url=(a,s)=>{(typeof a=="string"||typeof a=="number")&&(a={user:a}),typeof a=="object"&&!Array.isArray(a)&&"code"in a&&(a={user:a.code}),Array.isArray(a)&&(a={user:a[0]}),a=M(a);const i={user:typeof a.user=="object"?a.user.code:a.user};return d.definition.url.replace("{user}",i.user.toString()).replace(/\/+$/,"")+R(s)};d.get=(a,s)=>({url:d.url(a,s),method:"get"});d.head=(a,s)=>({url:d.url(a,s),method:"head"});function se({users:a}){const[s,i]=b.useState(""),[m,l]=b.useState(null),n={total:a.length,verified:a.filter(t=>t.paid).length,pending:a.filter(t=>!t.paid&&t.invoice!=null).length,arriving:a.filter(t=>new Date(t.arrive)<=new Date).length},r=[{label:"Semua Jabatan",value:null},{label:"Pembina",value:"Pembina"},{label:"Pengurus",value:"Pengurus"},{label:"Pengawas",value:"Pengawas"},{label:"Anggota",value:"Anggota"}],o=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(u,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:n.total,severity:"info",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Peserta"}),e.jsx("p",{className:"text-2xl font-bold",children:n.total})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx($,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:n.verified,severity:"success",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Terverifikasi"}),e.jsx("p",{className:"text-2xl font-bold",children:n.verified})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(F,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:n.pending,severity:"warning",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Menunggu"}),e.jsx("p",{className:"text-2xl font-bold",children:n.pending})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(f,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:n.arriving,className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Sudah Tiba"}),e.jsx("p",{className:"text-2xl font-bold",children:n.arriving})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md lg:flex-row",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(L,{value:s,onChange:t=>i(t.target.value),placeholder:"Cari nama, utusan, atau nomor telepon...",className:"w-full pl-10"})}),e.jsx(T,{value:m,onChange:t=>l(t.value),options:r,placeholder:"Filter Jabatan",className:"w-full lg:w-48"})]})]}),p=t=>e.jsxs(C,{href:d(t.code),className:"-m-2 flex items-center space-x-3 rounded-lg p-2 transition hover:bg-gray-50",children:[e.jsx(k,{image:t.avatar||`https://ui-avatars.com/api/?name=${t.name}&background=10b981&color=fff`,shape:"circle",size:"large",className:"border-2 border-emerald-100 [&_img]:object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx(U,{className:"mr-1 h-3 w-3"}),t.phone]})]})]}),y=t=>{const c={DPW:"info",DPD:"success",DMW:"warning",Kampus:"help",Orpen:"danger"};return e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{value:t.office.type,severity:c[t.office.type]||"info",className:"text-xs font-semibold"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t.office.name})]})},j=t=>{const c={Pembina:"bg-purple-100 text-purple-700 border-purple-200",Pengurus:"bg-blue-100 text-blue-700 border-blue-200",Pengawas:"bg-amber-100 text-amber-700 border-amber-200",Anggota:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsxs("span",{className:`inline-flex items-center rounded-full border-2 px-3 py-1 text-sm font-semibold ${c[t.employment.name]||c.Anggota}`,children:[e.jsx(E,{className:"mr-1 h-3 w-3"}),t.employment.name]})},N=t=>e.jsx("div",{className:"md:text-md rounded-lg border border-emerald-200 bg-emerald-50 p-1 text-center font-mono text-xs font-bold text-emerald-600 md:px-3 md:py-2",children:t.code}),v=t=>{const c=new Date(t.arrive).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),P=new Date(t.depart).toLocaleDateString("id-ID",{day:"numeric",month:"short"});return e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"mb-1 flex items-center text-gray-600",children:[e.jsx(f,{className:"mr-1 h-3 w-3 text-emerald-500"}),e.jsx("span",{className:"font-medium",children:"Tiba:"}),e.jsx("span",{className:"ml-1",children:c})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(f,{className:"mr-1 h-3 w-3 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Pulang:"}),e.jsx("span",{className:"ml-1",children:P})]})]})},w=m?a.filter(t=>t.employment.name===m):a;return e.jsx(D,{children:e.jsxs("div",{className:"space-y-6 p-2 md:p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center text-3xl font-bold text-gray-800",children:[e.jsx(u,{className:"mr-3 h-8 w-8 text-emerald-600"}),"Manajemen Peserta"]}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Muswil VI Hidayatullah 2025"})]})}),e.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs(A,{value:w,dataKey:"id",paginator:!0,rows:20,rowsPerPageOptions:[10,20,40,50,100,200,300,400],globalFilter:s,globalFilterFields:["name","office.name","phone"],header:o,emptyMessage:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(u,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Tidak ada data peserta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Silakan tambah peserta baru"})]}),className:"text-sm",stripedRows:!0,showGridlines:!0,responsiveLayout:"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Menampilkan {first} - {last} dari {totalRecords} peserta",children:[e.jsx(x,{body:p,header:"Peserta",sortable:!0,sortField:"name"}),e.jsx(x,{body:y,header:"Utusan",sortable:!0,sortField:"office.name",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell"}),e.jsx(x,{body:j,header:"Jabatan",sortable:!0,sortField:"employment.name",headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell"}),e.jsx(x,{body:N,header:"Kode Akses",field:"code"}),e.jsx(x,{field:"capsize",header:"Peci",sortable:!0,headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"}),e.jsx(x,{body:v,header:"Jadwal",headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"})]})})]})})}export{se as default};
