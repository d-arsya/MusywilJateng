import{r as b,j as e,L as v}from"./app-CxwFO6Mo.js";import{A as C}from"./admin-E-oDvCiN.js";import{A as P}from"./avatar.esm-Cd6zflmZ.js";import{B as h}from"./badge.esm-Wf4EKdE_.js";import{D as L,C as x}from"./datatable.esm-BEx8_L8E.js";import{D as k}from"./dropdown.esm-CfIWmEz0.js";import{I as A}from"./inputtext.esm-hDIdlt7v.js";import{T as S}from"./tag.esm-0wSyE1qn.js";import{U as u}from"./users-Bz38juVE.js";import{C as T}from"./circle-check-BRN1NX2q.js";import{C as D}from"./clock-DF3NKAnN.js";import{C as $}from"./calendar-BZxz1Tct.js";import{P as U}from"./phone-8Bbq-GQK.js";import{U as E}from"./user-check-BnO_M0sj.js";/* empty css            */import"./x-B2CfeARm.js";import"./createLucideIcon-QkpXLN1J.js";import"./button.esm-BYXnzGlF.js";import"./overlayservice.esm-BRNhnseA.js";let f={};const F=a=>{if(!a||!a.query&&!a.mergeQuery)return"";const s=a.query??a.mergeQuery,n=a.mergeQuery!==void 0,c=r=>r===!0?"1":r===!1?"0":r.toString(),l=new URLSearchParams(n&&typeof window<"u"?window.location.search:"");for(const r in s){if(s[r]===void 0||s[r]===null){l.delete(r);continue}if(Array.isArray(s[r]))l.has(`${r}[]`)&&l.delete(`${r}[]`),s[r].forEach(i=>{l.append(`${r}[]`,i.toString())});else if(typeof s[r]=="object"){l.forEach((i,p)=>{p.startsWith(`${r}[`)&&l.delete(p)});for(const i in s[r])typeof s[r][i]>"u"||["string","number","boolean"].includes(typeof s[r][i])&&l.set(`${r}[${i}]`,c(s[r][i]))}else l.set(r,c(s[r]))}const o=l.toString();return o.length>0?`?${o}`:""},M=a=>{const s={...a??{}};for(const n in f)s[n]===void 0&&f[n]!==void 0&&(s[n]=f[n]);return s},m=(a,s)=>({url:m.url(a,s),method:"get"});m.definition={methods:["get","head"],url:"/admin/peserta/{user}"};m.url=(a,s)=>{(typeof a=="string"||typeof a=="number")&&(a={user:a}),typeof a=="object"&&!Array.isArray(a)&&"code"in a&&(a={user:a.code}),Array.isArray(a)&&(a={user:a[0]}),a=M(a);const n={user:typeof a.user=="object"?a.user.code:a.user};return m.definition.url.replace("{user}",n.user.toString()).replace(/\/+$/,"")+F(s)};m.get=(a,s)=>({url:m.url(a,s),method:"get"});m.head=(a,s)=>({url:m.url(a,s),method:"head"});function te({users:a}){const[s,n]=b.useState(""),[c,l]=b.useState("all"),o={total:a.length,verified:a.filter(t=>t.paid).length,pending:a.filter(t=>!t.paid&&t.invoice!=null).length,arriving:a.filter(t=>t.room_id==null).length},r=[{label:"Semua Jabatan",value:"all"},{label:"Pembina",value:"Pembina"},{label:"Pengurus",value:"Pengurus"},{label:"Pengawas",value:"Pengawas"},{label:"Anggota",value:"Anggota"}],i=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(u,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:o.total,severity:"info",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Total Peserta"}),e.jsx("p",{className:"text-2xl font-bold",children:o.total})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(T,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:o.verified,severity:"success",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Sudah Membayar"}),e.jsx("p",{className:"text-2xl font-bold",children:o.verified})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-amber-500 to-orange-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx(D,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:o.pending,severity:"warning",className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Menunggu Verifikasi"}),e.jsx("p",{className:"text-2xl font-bold",children:o.pending})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-500 to-red-600 p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx($,{className:"h-8 w-8 opacity-80"}),e.jsx(h,{value:o.arriving,className:"bg-white/20"})]}),e.jsx("p",{className:"text-sm opacity-90",children:"Belum Terplotting"}),e.jsx("p",{className:"text-2xl font-bold",children:o.arriving})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md lg:flex-row",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(A,{value:s,onChange:t=>n(t.target.value),placeholder:"Cari nama, utusan, atau nomor telepon...",className:"w-full pl-10"})}),e.jsx(k,{value:c,onChange:t=>l(t.value),options:r,placeholder:"Filter Jabatan",className:"w-full lg:w-48"})]})]}),p=t=>e.jsxs(v,{href:m(t.code),className:"-m-2 flex items-center space-x-3 rounded-lg p-2 transition hover:bg-gray-50",children:[e.jsx(P,{image:t.avatar||`https://ui-avatars.com/api/?name=${t.name}&background=10b981&color=fff`,shape:"circle",size:"large",className:"border-2 border-emerald-100 [&_img]:object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:t.name}),e.jsxs("p",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsx(U,{className:"mr-1 h-3 w-3"}),t.phone]})]})]}),y=t=>{const d={DPW:"info",DPD:"success",DMW:"warning",Kampus:"help",Orpen:"danger"};return e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{value:t.office.type,severity:d[t.office.type]||"info",className:"text-xs font-semibold"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:t.office.name})]})},j=t=>{const d={Pembina:"bg-purple-100 text-purple-700 border-purple-200",Pengurus:"bg-blue-100 text-blue-700 border-blue-200",Pengawas:"bg-amber-100 text-amber-700 border-amber-200",Anggota:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsxs("span",{className:`inline-flex items-center rounded-full border-2 px-3 py-1 text-sm font-semibold ${d[t.employment.name]||d.Anggota}`,children:[e.jsx(E,{className:"mr-1 h-3 w-3"}),t.employment.name]})},w=t=>(console.log(t),e.jsxs("div",{className:"text-sm",children:[t.room?.building.name," ",e.jsx("br",{}),t.room?.name]})),N=a.filter(t=>(console.log(c),c=="all"?t.name.toLowerCase().includes(s.toLowerCase())||t.phone.includes(s)||t.office.name.toLowerCase().includes(s.toLowerCase())||t.employment.name.toLowerCase().includes(s.toLowerCase()):(t.name.toLowerCase().includes(s.toLowerCase())||t.phone.includes(s)||t.office.name.toLowerCase().includes(s.toLowerCase()))&&t.employment.name.toLowerCase()==c.toLowerCase())).sort((t,d)=>{const g=t.name.localeCompare(d.name);if(g!==0)return g});return e.jsx(C,{children:e.jsxs("div",{className:"space-y-6 p-2 md:p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"flex items-center text-3xl font-bold text-gray-800",children:[e.jsx(u,{className:"mr-3 h-8 w-8 text-emerald-600"}),"Manajemen Peserta"]}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Muswil VI Hidayatullah 2025"})]})}),e.jsx("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs(L,{value:N,dataKey:"id",paginator:!0,rows:20,rowsPerPageOptions:[10,20,40,50,100,200,300,400],header:i,emptyMessage:e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(u,{className:"mx-auto mb-4 h-16 w-16 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium text-gray-500",children:"Tidak ada data peserta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Silakan tambah peserta baru"})]}),className:"text-sm",stripedRows:!0,showGridlines:!0,responsiveLayout:"scroll",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Menampilkan {first} - {last} dari {totalRecords} peserta",children:[e.jsx(x,{body:p,header:"Peserta",sortable:!0,sortField:"name"}),e.jsx(x,{body:y,header:"Utusan",sortable:!0,sortField:"office.name",headerClassName:"hidden lg:table-cell",bodyClassName:"hidden lg:table-cell"}),e.jsx(x,{body:j,header:"Jabatan",sortable:!0,sortField:"employment.name",headerClassName:"hidden md:table-cell",bodyClassName:"hidden md:table-cell"}),e.jsx(x,{field:"capsize",header:"Peci",sortable:!0,headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"}),e.jsx(x,{body:w,header:"Kamar",headerClassName:"hidden xl:table-cell",bodyClassName:"hidden xl:table-cell"})]})})]})})}export{te as default};
