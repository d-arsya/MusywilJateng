import{r as m,u as Q,j as e,a as i}from"./app-DMqxqPJM.js";import{A as U}from"./admin-BjmkL1yy.js";import{B as n}from"./button.esm-C0xj6u3o.js";import{D as H,C as l}from"./datatable.esm-DpbtT2Zb.js";import{C as I,c as W}from"./confirmdialog.esm-Dzs_Yrkq.js";import{D as $}from"./dropdown.esm-CQUAa7zv.js";import{I as u}from"./inputtext.esm-CqZLBaoz.js";import{T as J}from"./tag.esm-Df4OKypR.js";import{C as g}from"./calendar-DAmSN12J.js";import{C as O}from"./clock-BzdlqY_5.js";import{U as h}from"./users-BhxOVoR-.js";import{C as R}from"./circle-check-big-BVUfto8H.js";import{P as V}from"./plus-1bj_-OTn.js";import{Q as q}from"./qr-code-NfGPMiF6.js";import{U as G}from"./user-plus-CyubbU1V.js";import{P as X,T as Y}from"./trash-2-CPgK3zN2.js";/* empty css            */import"./x-DJIJzLN8.js";import"./createLucideIcon-DqFWOxZ4.js";import"./overlayservice.esm-u3reRXgZ.js";import"./dialog.esm-BDgGQl6K.js";const Ne=({meetings:r})=>{const[d,p]=m.useState(""),[o,b]=m.useState(null),[c,j]=m.useState(""),{delete:f}=Q(null),N=r.length,y=r.filter(t=>t.status==="Belum").length,v=r.filter(t=>t.status==="Sedang").length,w=r.filter(t=>t.status==="Telah").length,C=()=>{i.get("/admin/kegiatan/create")},k=t=>{i.get("/admin/kegiatan/"+t.code+"/edit")},S=t=>{if(t.total_attended>0){alert("Tidak bisa menghapus kegiatan yang sudah ada peserta hadir!");return}W({message:`Apakah Anda yakin ingin menghapus "${t.name}"?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{f("/admin/kegiatan/"+t.code,{onError:s=>console.log(s)})}})},T=t=>{i.get("/admin/kegiatan/stats")},B=t=>{i.get("/admin/kegiatan/assign")},D=t=>{i.get("/admin/kegiatan/scan")},z=t=>e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 font-semibold text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(g,{size:12}),new Date(t.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),A=t=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:t.start_time.slice(0,5)})}),L=t=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:t.room})}),M=t=>{const s={Belum:{label:"Belum",severity:"info"},Sedang:{label:"Berlangsung",severity:"warning"},Telah:{label:"Selesai",severity:"success"}}[t.status];return e.jsx(J,{value:s.label,severity:s.severity})},_=t=>{const a=t.attendance_rate;let s="text-gray-600";return a>=80?s="text-emerald-600":a>=50?s="text-orange-600":a>0&&(s="text-red-600"),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[e.jsx(h,{size:14,className:"text-gray-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[t.total_attended,"/",t.total_participants]})]}),e.jsxs("div",{className:`text-sm font-semibold ${s}`,children:[a,"%"]})]})},K=t=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(n,{icon:e.jsx(q,{size:14}),className:"p-button-rounded p-button-text p-button-success p-button-xxl",onClick:()=>D(),tooltip:"Buka Scanner",disabled:t.status==="Telah"}),e.jsx(n,{icon:e.jsx(G,{size:14}),className:"p-button-rounded p-button-text p-button-info p-button-xxl",onClick:()=>B(),tooltip:"Assign Peserta"}),e.jsx(n,{icon:e.jsx(X,{size:14}),className:"p-button-rounded p-button-text p-button-xxl",onClick:()=>k(t),tooltip:"Edit"}),e.jsx(n,{icon:e.jsx(Y,{size:14}),className:"p-button-rounded p-button-text p-button-danger p-button-xxl",onClick:()=>S(t),tooltip:"Hapus",disabled:t.total_attended>0})]}),P=t=>e.jsx(n,{label:"Detail",className:"p-button-sm p-button-outlined",onClick:()=>T()}),x=r.filter(t=>{const a=t.name.toLowerCase().includes(d.toLowerCase())||t.room.toLowerCase().includes(d.toLowerCase()),s=!o||t.status===o.value,F=!c||t.date===c;return a&&s&&F}).sort((t,a)=>{const s=new Date(t.date)-new Date(a.date);return s!==0?s:t.start_time.localeCompare(a.start_time)}),E=[{label:"Belum Dimulai",value:"Belum"},{label:"Sedang Berlangsung",value:"Sedang"},{label:"Selesai",value:"Telah"}];return e.jsxs(U,{children:[e.jsx(I,{}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2 text-3xl font-bold text-gray-800",children:"Manajemen Kegiatan"}),e.jsx("p",{className:"text-gray-600",children:"Kelola jadwal kegiatan dan presensi peserta Munas"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Kegiatan"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:N})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(g,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Belum Dimulai"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:y})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:e.jsx(O,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Berlangsung"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:v})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(h,{className:"text-orange-600",size:24})})]})}),e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Selesai"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-600",children:w})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(R,{className:"text-emerald-600",size:24})})]})})]}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 items-end gap-4 md:grid-cols-8",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Cari Kegiatan"}),e.jsx("span",{className:"p-input-icon-left w-full",children:e.jsx(u,{placeholder:"Judul atau lokasi...",value:d,onChange:t=>p(t.target.value),className:"w-full"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Status"}),e.jsx($,{value:o,options:E,onChange:t=>b(t.value),placeholder:"Semua Status",className:"w-full",showClear:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Tanggal"}),e.jsx(u,{type:"date",value:c,onChange:t=>j(t.target.value),className:"w-full"})]}),e.jsx(n,{label:"Tambah",icon:e.jsx(V,{size:16}),className:"p-button-success h-max",onClick:C})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Daftar Kegiatan (",x.length,")"]})}),e.jsxs(H,{value:x,emptyMessage:"Belum ada kegiatan. Tambahkan kegiatan pertama!",className:"text-sm",children:[e.jsx(l,{field:"name",header:"Kegiatan",body:z,style:{minWidth:"250px"}}),e.jsx(l,{field:"start_time",header:"Waktu",body:A,style:{width:"150px"}}),e.jsx(l,{field:"room",header:"Lokasi",body:L,style:{width:"180px"}}),e.jsx(l,{field:"status",header:"Status",body:M,style:{width:"180px"}}),e.jsx(l,{header:"Kehadiran",body:_,style:{width:"120px"}}),e.jsx(l,{header:"Detail",body:P,style:{width:"140px"}}),e.jsx(l,{header:"Aksi",body:K,style:{width:"180px"}})]})]})]})};export{Ne as default};
