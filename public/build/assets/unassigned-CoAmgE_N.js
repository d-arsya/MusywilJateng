import{r,j as e,a as Q}from"./app-PLdOww6q.js";import{A as H}from"./admin-CfRuVo5U.js";import{A as q}from"./avatar.esm-DlmhzVmG.js";import{B as m}from"./button.esm-BLnfPJPl.js";import{D as V,C as c}from"./datatable.esm-BIK1OpAZ.js";import{D as W}from"./dialog.esm-2H3DiQVf.js";import{D as u}from"./dropdown.esm-Dft-QQ41.js";import{I as X}from"./inputtext.esm-cKWTDTRc.js";import{T as Y}from"./tag.esm-BORG9lGw.js";import{A as Z}from"./arrow-left-DQZF2cnB.js";import{U as w}from"./users-DqS9GHtX.js";import{U as k}from"./user-plus-DD2357dp.js";import{c as ee}from"./createLucideIcon-DleWnz_l.js";import{D as se}from"./door-open-BPYQ_0kV.js";import{P as ae}from"./phone-DHY6D2Ev.js";import{B as te}from"./briefcase-BjNOm5wf.js";/* empty css            */import"./x-DIrLv6Py.js";import"./overlayservice.esm-DsZIDk5b.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ne=ee("search",le),Ce=({users:g,employments:C,buildings:y,offices:S})=>{const[P,i]=r.useState(!1),[a,d]=r.useState([]),[x,A]=r.useState(""),[p,B]=r.useState(null),[f,T]=r.useState(null),[o,j]=r.useState(null),[n,h]=r.useState(null),[b,N]=r.useState([]),U=()=>{Q.get("/admin/penginapan")},D=s=>{d([s.id]),j(null),h(null),N([]),i(!0)},z=()=>{a.length!==0&&(j(null),h(null),N([]),i(!0))},O=s=>{j(s),N(s?s.rooms:[]),h(null)},$=()=>{if(!n)return;const t=y.find(l=>l.id===o.id).rooms.find(l=>l.id===n.id);t.users_count+=a.length,setUsers(g.filter(l=>!a.includes(l.id))),d([]),i(!1),alert(`Berhasil assign ${a.length} peserta ke ${o.name} - ${n.name}`)},K=()=>{d([])},L=s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{label:s.name.charAt(0),size:"large",shape:"circle",className:"bg-orange-600 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(ae,{size:12}),s.phone]})]})]}),R=s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{size:14,className:"text-gray-500"}),e.jsx("span",{className:"text-sm",children:s.office.name})]}),_=s=>{const t={Pembina:"info",Pengurus:"success",Pengawas:"warning",Anggota:"secondary"};return e.jsx(Y,{value:s.employment.name,severity:t[s.employment.name]||"secondary"})},E=s=>e.jsx(m,{label:"Assign",icon:e.jsx(k,{size:14}),className:"p-button-sm p-button-success",onClick:()=>D(s)}),v=g.filter(s=>{const t=s.name.toLowerCase().includes(x.toLowerCase())||s.phone.includes(x)||s.office.name.toLowerCase().includes(x.toLowerCase()),l=!p||s.office.id===p.id,M=!f||s.employment.id===f.id;return t&&l&&M}).sort((s,t)=>{const l=s.name.localeCompare(t.name);return l!==0?l:s.office.name.localeCompare(t.office.name)}),F=y.map(s=>({label:`${s.name} (${s.rooms.length} kamar)`,value:s})),I=b.map(s=>({label:`${s.name} (${s.users_count} orang)`,value:s})),J=S.map(s=>({label:s.name,value:s})),G=C.map(s=>({label:s.name,value:s}));return e.jsxs(H,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:U,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(Z,{size:20}),e.jsx("span",{className:"font-medium",children:"Kembali ke Dashboard"})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"â€º"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Peserta Belum Terplotting"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Peserta Belum Terplotting"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Daftar peserta yang belum mendapatkan kamar penginapan"})]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-1",children:e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Total Belum Terplotting"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[g.length," Peserta"]})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100",children:e.jsx(w,{className:"text-orange-600",size:24})})]})})}),a.length>0&&e.jsx("div",{className:"mb-6 rounded-lg bg-emerald-600 p-4 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{size:20}),e.jsxs("span",{className:"font-semibold",children:[a.length," peserta dipilih"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{label:"Assign Semua ke Kamar yang Sama",icon:e.jsx(k,{size:16}),className:"p-button-sm border-0 bg-white text-emerald-600",onClick:z}),e.jsx(m,{label:"Batal Pilihan",className:"p-button-sm p-button-outlined border-white text-white hover:bg-white/10",onClick:K})]})]})}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Cari Peserta"}),e.jsxs("span",{className:"p-input-icon-left w-full",children:[e.jsx(ne,{size:16,className:"text-gray-400"}),e.jsx(X,{placeholder:"Nama, telepon, atau utusan...",value:x,onChange:s=>A(s.target.value),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Utusan"}),e.jsx(u,{value:p,options:J,onChange:s=>B(s.value),placeholder:"Semua Utusan",className:"w-full",showClear:!0,filter:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Filter Jabatan"}),e.jsx(u,{value:f,options:G,onChange:s=>T(s.value),placeholder:"Semua Jabatan",className:"w-full",showClear:!0})]})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Daftar Peserta (",v.length,")"]})}),e.jsxs(V,{value:v,selection:v.filter(s=>a.includes(s.id)),onSelectionChange:s=>d(s.value.map(t=>t.id)),dataKey:"id",emptyMessage:"Tidak ada peserta yang belum terplotting",paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],className:"text-sm",children:[e.jsx(c,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(c,{field:"name",header:"Nama Peserta",body:L}),e.jsx(c,{field:"office.name",header:"Utusan",body:R}),e.jsx(c,{field:"employment.name",header:"Jabatan",body:_,style:{width:"150px"}}),e.jsx(c,{header:"Aksi",body:E,style:{width:"150px"}})]})]}),e.jsx(W,{header:a.length===1?"Assign Peserta ke Kamar":`Assign ${a.length} Peserta ke Kamar`,visible:P,style:{width:"550px"},onHide:()=>i(!1),footer:e.jsxs("div",{children:[e.jsx(m,{label:"Batal",className:"p-button-text",onClick:()=>i(!1)}),e.jsx(m,{label:"Assign ke Kamar",className:"p-button-success",onClick:$,disabled:!n})]}),children:e.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[a.length>1&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[a.length," peserta"]})," akan di-assign ke kamar yang sama"]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["1. Pilih Gedung ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{value:o,options:F,onChange:s=>O(s.value),placeholder:"Pilih gedung",className:"w-full",filter:!0})]}),o&&e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["2. Pilih Kamar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{value:n,options:I,onChange:s=>h(s.value),placeholder:"Pilih kamar",className:"w-full",disabled:b.length===0,filter:!0}),b.length===0&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:"Gedung ini belum memiliki kamar. Tambahkan kamar terlebih dahulu."})]}),n&&e.jsx("div",{className:"rounded-lg border border-emerald-200 bg-emerald-50 p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(se,{className:"text-emerald-600",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"mb-1 font-semibold text-emerald-800",children:[o.name," - ",n.name]}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Saat ini: ",e.jsxs("strong",{children:[n.users_count," orang"]})]}),e.jsxs("p",{className:"text-sm text-emerald-700",children:["Setelah assign: ",e.jsxs("strong",{children:[n.users_count+a.length," orang"]})]})]})]})})]})})]})};export{Ce as default};
