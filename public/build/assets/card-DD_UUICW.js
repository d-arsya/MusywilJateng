import{r as P,j as u}from"./app-B15vGx_f.js";import{A as z}from"./auth-CTMCGw87.js";import{A as B}from"./avatar.esm-CUZj1GLB.js";import{Q as G}from"./index-Bm2-bQ2x.js";/* empty css            */import"./house-CmOJJLgZ.js";import"./createLucideIcon-C3osmJLB.js";import"./user-CFaK7-Y3.js";function Q(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const X=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function d(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let g=null;function j(e={}){return g||(e.includeStyleProperties?(g=e.includeStyleProperties,g):(g=d(window.getComputedStyle(document.documentElement)),g))}function y(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function K(e){const t=y(e,"border-left-width"),r=y(e,"border-right-width");return e.clientWidth+t+r}function J(e){const t=y(e,"border-top-width"),r=y(e,"border-bottom-width");return e.clientHeight+t+r}function D(e,t={}){const r=t.width||K(e),n=t.height||J(e);return{width:r,height:n}}function Y(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const f=16384;function Z(e){(e.width>f||e.height>f)&&(e.width>f&&e.height>f?e.width>e.height?(e.height*=f/e.width,e.width=f):(e.width*=f/e.height,e.height=f):e.width>f?(e.height*=f/e.width,e.width=f):(e.width*=f/e.height,e.height=f))}function p(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function N(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ee(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),N(a)}const l=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||l(r,t)};function te(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function re(e,t){return j(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function ne(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?te(r):re(r,n);return document.createTextNode(`${a}{${s}}`)}function $(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=X();try{t.className=`${t.className} ${i}`}catch{return}const c=document.createElement("style");c.appendChild(ne(i,r,a,n)),t.appendChild(c)}function se(e,t,r){$(e,t,":before",r),$(e,t,":after",r)}const v="application/font-woff",T="image/jpeg",ae={woff:v,woff2:v,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:T,jpeg:T,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ie(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function R(e){const t=ie(e).toLowerCase();return ae[t]||""}function ce(e){return e.split(/,/)[1]}function E(e){return e.search(/^(data:)/)!==-1}function oe(e,t){return`data:${t};base64,${e}`}async function U(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const c=new FileReader;c.onerror=i,c.onloadend=()=>{try{s(r({res:n,result:c.result}))}catch(o){i(o)}},c.readAsDataURL(a)})}const S={};function le(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function C(e,t,r){const n=le(e,t,r.includeQueryParams);if(S[n]!=null)return S[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await U(e,r.fetchRequestInit,({res:i,result:c})=>(t||(t=i.headers.get("Content-Type")||""),ce(c)));a=oe(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return S[n]=a,a}async function ue(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):p(t)}async function fe(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i?.drawImage(e,0,0,s.width,s.height);const c=s.toDataURL();return p(c)}const r=e.poster,n=R(r),a=await C(r,n,t);return p(a)}async function he(e,t){var r;try{if(!((r=e?.contentDocument)===null||r===void 0)&&r.body)return await x(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function me(e,t){return l(e,HTMLCanvasElement)?ue(e):l(e,HTMLVideoElement)?fe(e,t):l(e,HTMLIFrameElement)?he(e,t):e.cloneNode(H(e))}const de=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",H=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function ge(e,t,r){var n,a;if(H(t))return t;let s=[];return de(e)&&e.assignedNodes?s=d(e.assignedNodes()):l(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=d(e.contentDocument.body.childNodes):s=d(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||l(e,HTMLVideoElement)||await s.reduce((i,c)=>i.then(()=>x(c,r)).then(o=>{o&&t.appendChild(o)}),Promise.resolve()),t}function we(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):j(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),l(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function ye(e,t){l(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),l(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function pe(e,t){if(l(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function xe(e,t,r){return l(t,Element)&&(we(e,t,r),se(e,t,r),ye(e,t),pe(e,t)),t}async function be(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const c=r[s].getAttribute("xlink:href");if(c){const o=e.querySelector(c),h=document.querySelector(c);!o&&h&&!n[c]&&(n[c]=await x(h,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const c=document.createElementNS(s,"defs");i.appendChild(c);for(let o=0;o<a.length;o++)c.appendChild(a[o]);e.appendChild(i)}return e}async function x(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>me(n,t)).then(n=>ge(e,n,t)).then(n=>xe(e,n,t)).then(n=>be(n,t))}const V=/url\((['"]?)([^'"]+?)\1\)/g,Se=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ee=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Re(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ce(e){const t=[];return e.replace(V,(r,n,a)=>(t.push(a),r)),t.filter(r=>!E(r))}async function Pe(e,t,r,n,a){try{const s=r?Q(t,r):t,i=R(t);let c;return a||(c=await C(s,i,n)),e.replace(Re(t),`$1${c}$3`)}catch{}return e}function $e(e,{preferredFontFormat:t}){return t?e.replace(Ee,r=>{for(;;){const[n,,a]=Se.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function M(e){return e.search(V)!==-1}async function O(e,t,r){if(!M(e))return e;const n=$e(e,r);return Ce(n).reduce((s,i)=>s.then(c=>Pe(c,i,t,r)),Promise.resolve(n))}async function w(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await O(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function ve(e,t){await w("background",e,t)||await w("background-image",e,t),await w("mask",e,t)||await w("-webkit-mask",e,t)||await w("mask-image",e,t)||await w("-webkit-mask-image",e,t)}async function Te(e,t){const r=l(e,HTMLImageElement);if(!(r&&!E(e.src))&&!(l(e,SVGImageElement)&&!E(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await C(n,R(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...o)=>{try{s(t.onImageErrorHandler(...o))}catch(h){i(h)}}:i;const c=e;c.decode&&(c.decode=s),c.loading==="lazy"&&(c.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Fe(e,t){const n=d(e.childNodes).map(a=>_(a,t));await Promise.all(n).then(()=>e)}async function _(e,t){l(e,Element)&&(await ve(e,t),await Te(e,t),await Fe(e,t))}function Le(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const F={};async function L(e){let t=F[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},F[e]=t,t}async function A(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let c=i.replace(n,"$1");return c.startsWith("https://")||(c=new URL(c,e.url).href),U(c,t.fetchRequestInit,({result:o})=>(r=r.replace(i,`url(${o})`),[i,o]))});return Promise.all(s).then(()=>r)}function I(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const o=a.exec(n);if(o===null)break;t.push(o[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(i,"gi");for(;;){let o=s.exec(n);if(o===null){if(o=c.exec(n),o===null)break;s.lastIndex=c.lastIndex}else c.lastIndex=s.lastIndex;t.push(o[0])}return t}async function Ae(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{d(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let c=i+1;const o=s.href,h=L(o).then(m=>A(m,t)).then(m=>I(m).forEach(b=>{try{a.insertRule(b,b.startsWith("@import")?c+=1:a.cssRules.length)}catch(q){console.error("Error inserting rule from remote css",{rule:b,error:q})}})).catch(m=>{console.error("Error loading remote css",m.toString())});n.push(h)}})}catch(s){const i=e.find(c=>c.href==null)||document.styleSheets[0];a.href!=null&&n.push(L(a.href).then(c=>A(c,t)).then(c=>I(c).forEach(o=>{i.insertRule(o,i.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{d(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Ie(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>M(t.style.getPropertyValue("src")))}async function ke(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=d(e.ownerDocument.styleSheets),n=await Ae(r,t);return Ie(n)}function W(e){return e.trim().replace(/["']/g,"")}function je(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(W(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function De(e,t){const r=await ke(e,t),n=je(e);return(await Promise.all(r.filter(s=>n.has(W(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return O(s.cssText,i,t)}))).join(`
`)}async function Ue(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await De(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function He(e,t={}){const{width:r,height:n}=D(e,t),a=await x(e,t,!0);return await Ue(a,t),await _(a,t),Le(a,t),await ee(a,r,n)}async function Ve(e,t={}){const{width:r,height:n}=D(e,t),a=await He(e,t),s=await p(a),i=document.createElement("canvas"),c=i.getContext("2d"),o=t.pixelRatio||Y(),h=t.canvasWidth||r,m=t.canvasHeight||n;return i.width=h*o,i.height=m*o,t.skipAutoScale||Z(i),i.style.width=`${h}`,i.style.height=`${m}`,t.backgroundColor&&(c.fillStyle=t.backgroundColor,c.fillRect(0,0,i.width,i.height)),c.drawImage(s,0,0,i.width,i.height),i}async function k(e,t={}){return(await Ve(e,t)).toDataURL()}function Qe({auth:e,app:t}){const r=e.user,n=P.useRef(null),a=P.useRef(null),s=async()=>{if(n.current)try{const c=await k(n.current,{cacheBust:!0}),o=document.createElement("a");o.download=r.name+"-id-card.png",o.href=c,o.click()}catch(c){console.error("Failed to download image:",c)}},i=async()=>{if(a.current)try{const c=await k(a.current,{cacheBust:!0}),o=document.createElement("a");o.download=r.name+"-qr-code.png",o.href=c,o.click()}catch(c){console.error("Failed to download image:",c)}};return u.jsx(z,{children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsxs("div",{ref:n,className:"relative w-full max-w-xl",children:[u.jsx("img",{src:"/assets/img/card-vertical.jpg",alt:"Banner",className:"w-full rounded-lg shadow-md"}),u.jsxs("div",{className:"absolute top-2/5 left-1/2 flex w-full -translate-x-1/2 transform flex-col items-center space-y-3",children:[u.jsxs("div",{className:"text-center text-lg font-semibold text-white drop-shadow-lg",children:[r.name,u.jsxs("p",{className:"mt-1 text-xs font-thin",children:[r.office.type," ",r.office.name]})]}),u.jsx(B,{image:r.avatar||void 0,label:r.avatar?void 0:r.name.charAt(0),size:"xlarge",shape:"circle",className:"h-32 w-32 rounded-full border-2 border-white bg-emerald-800 shadow-lg [&_img]:object-cover",style:{width:"80px",height:"80px",fontSize:"32px"}}),u.jsx("div",{ref:a,className:"rounded-sm bg-white p-1",children:u.jsx(G,{value:t.url+"/s/"+r.code,size:128,className:"h-20 w-20"})})]})]}),u.jsxs("div",{className:"flex flex-row justify-between gap-6",children:[u.jsx("button",{onClick:s,className:"rounded-lg bg-emerald-400 px-4 py-2 text-white shadow hover:bg-emerald-700",children:"Unduh"}),u.jsx("button",{onClick:i,className:"rounded-lg bg-emerald-400 px-4 py-2 text-white shadow hover:bg-emerald-700",children:"Unduh QR"})]})]})})}export{Qe as default};
