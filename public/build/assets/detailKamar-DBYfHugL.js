import{r as d,j as e,a as Z}from"./app-CDoqvrB_.js";import{A as ee}from"./admin-CKXe-yBX.js";import{A as C,T as ae}from"./tag.esm-YYzPS09-.js";import{B as l,D as se,C as u,I as ne,a as te}from"./datatable.esm-BryucHDz.js";import{C as le,D as k,c as v}from"./confirmdialog.esm-BgFSz5f6.js";import{A as ie,U as re}from"./user-plus-BCfxlzSH.js";import{P as de,T as oe}from"./trash-2-BnzbNZMq.js";import{U as me}from"./users-BFOm1zZ8.js";import{c as S}from"./createLucideIcon-LAJ5KBlG.js";import{P as ce}from"./phone-WiktpxL5.js";import{B as he}from"./briefcase--aWO0TB1.js";/* empty css            */import"./x-tXtD0dz4.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],P=S("arrow-right-left",xe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],K=S("user-x",ue),$={id:1,name:"Gedung Aswad"},pe=[{id:101,name:"Fahri Rahman",phone:"081234567901",office:{name:"DPD Surabaya"},employment:{name:"Pengurus"}},{id:102,name:"Gilang Ramadhan",phone:"081234567902",office:{name:"DPW Sumatra"},employment:{name:"Anggota"}},{id:103,name:"Hendra Wijaya",phone:"081234567903",office:{name:"DMW Bali"},employment:{name:"Pembina"}}],ge=[{id:2,building_id:1,name:"Kamar 2",building:$},{id:3,building_id:1,name:"Kamar 3",building:$},{id:4,building_id:2,name:"Kamar 1",building:{id:2,name:"Gedung Biru"}},{id:5,building_id:2,name:"Kamar 2",building:{id:2,name:"Gedung Biru"}}],Te=({room:s})=>{const i=s.users;console.log(i);const[c,b]=d.useState(pe),[A,be]=d.useState(ge),[B,p]=d.useState(!1),[T,g]=d.useState(!1),[D,h]=d.useState(!1),[f,U]=d.useState(s.name),[fe,je]=d.useState([]),[t,j]=d.useState([]),[x,w]=d.useState(null),[r,N]=d.useState(null),[o,y]=d.useState([]),R=()=>{U(s.name),p(!0)},z=()=>{setRoom({...s,name:f}),p(!1)},M=()=>{if(i.length>0){alert("Tidak bisa menghapus kamar yang masih berpenghuni!");return}v({message:`Apakah Anda yakin ingin menghapus ${s.name}?`,header:"Konfirmasi Hapus",icon:"pi pi-exclamation-triangle",acceptLabel:"Hapus",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{console.log("Delete room and navigate back")}})},_=()=>{y([]),g(!0)},H=()=>{const n=c.filter(m=>o.includes(m.id)).map(m=>({...m,room_id:s.id}));setUsers([...i,...n]),b(c.filter(m=>!o.includes(m.id))),g(!1),alert(`Berhasil menambahkan ${o.length} peserta ke ${s.name}`)},L=a=>{w(a),N(null),h(!0)},E=()=>{r&&(setUsers(i.filter(a=>a.id!==x.id)),h(!1),alert(`${x.name} berhasil dipindah ke ${r.name} - ${r.building.name}`))},O=a=>{v({message:`Keluarkan ${a.name} dari ${s.name}?`,header:"Konfirmasi Keluarkan",icon:"pi pi-exclamation-triangle",acceptLabel:"Keluarkan",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{setUsers(i.filter(m=>m.id!==a.id));const n={...a,room_id:null};b([...c,n]),alert(`${a.name} berhasil dikeluarkan dari kamar`)}})},F=()=>{t.length!==0&&(w(null),N(null),h(!0))},G=()=>{t.length!==0&&v({message:`Keluarkan ${t.length} peserta dari ${s.name}?`,header:"Konfirmasi Keluarkan",icon:"pi pi-exclamation-triangle",acceptLabel:"Keluarkan",rejectLabel:"Batal",acceptClassName:"p-button-danger",accept:()=>{const a=i.filter(n=>t.includes(n.id));setUsers(i.filter(n=>!t.includes(n.id))),b([...c,...a.map(n=>({...n,room_id:null}))]),j([]),alert(`${a.length} peserta berhasil dikeluarkan dari kamar`)}})},I=()=>{!r||t.length===0||(setUsers(i.filter(a=>!t.includes(a.id))),j([]),h(!1),alert(`${t.length} peserta berhasil dipindah ke ${r.name} - ${r.building.name}`))},W=()=>{Z.get("/admin/penginapan/gedung/"+s.building.name)},J=a=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{label:a.name.charAt(0),size:"large",shape:"circle",className:"bg-emerald-600 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:a.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(ce,{size:12}),a.phone]})]})]}),q=a=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:14,className:"text-gray-500"}),e.jsxs("span",{className:"text-sm",children:[a.office.type," ",a.office.name]})]}),X=a=>{const n={Pembina:"info",Pengurus:"success",Pengawas:"warning",Anggota:"secondary"};return e.jsx(ae,{value:a.employment.name,severity:n[a.employment.name]||"secondary"})},Q=a=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{icon:e.jsx(P,{size:16}),className:"p-button-rounded p-button-text p-button-info p-button-sm",onClick:()=>L(a),tooltip:"Pindah Kamar"}),e.jsx(l,{icon:e.jsx(K,{size:16}),className:"p-button-rounded p-button-text p-button-danger p-button-sm",onClick:()=>O(a),tooltip:"Keluarkan"})]}),V=[...i].sort((a,n)=>{const m=a.name.localeCompare(n.name);return m!==0?m:a.office.name.localeCompare(n.office.name)}),Y=A.map(a=>({label:`${a.building.name} - ${a.name}`,value:a}));return e.jsxs(ee,{children:[e.jsx(le,{}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:W,className:"mb-4 flex items-center gap-2 text-emerald-600 hover:text-emerald-700",children:[e.jsx(ie,{size:20}),e.jsxs("span",{className:"font-medium",children:["Kembali ke ",s.building.name]})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Dashboard"}),e.jsx("span",{children:"›"}),e.jsx("span",{children:s.building.name}),e.jsx("span",{children:"›"}),e.jsx("span",{className:"font-medium text-gray-800",children:s.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[s.building.name," - ",s.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{icon:e.jsx(de,{size:16}),label:"Edit Nama",className:"p-button-outlined p-button-sm",onClick:R}),e.jsx(l,{icon:e.jsx(oe,{size:16}),label:"Hapus Kamar",className:"p-button-outlined p-button-danger p-button-sm",onClick:M,disabled:i.length>0})]})]})]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-1",children:e.jsx("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"Jumlah Penghuni"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:[i.length," Orang"]})]}),e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-emerald-100",children:e.jsx(me,{className:"text-emerald-600",size:24})})]})})}),e.jsx("div",{className:"mb-6 rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(l,{label:"Tambah Peserta ke Kamar",icon:e.jsx(re,{size:16}),className:"p-button-success",onClick:_}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{label:`Pindahkan ${t.length} Peserta`,icon:e.jsx(P,{size:16}),className:"p-button-info",onClick:F}),e.jsx(l,{label:`Keluarkan ${t.length} Peserta`,icon:e.jsx(K,{size:16}),className:"p-button-danger",onClick:G})]})]})}),e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 p-4",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Daftar Penghuni"})}),e.jsxs(se,{value:V,selection:t,onSelectionChange:a=>j(a.value.map(n=>n.id)),dataKey:"id",emptyMessage:"Kamar ini masih kosong. Tambahkan peserta!",className:"text-sm",children:[e.jsx(u,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),e.jsx(u,{field:"name",header:"Nama Peserta",body:J}),e.jsx(u,{field:"office.name",header:"Utusan",body:q}),e.jsx(u,{field:"employment.name",header:"Jabatan",body:X,style:{width:"150px"}}),e.jsx(u,{header:"Aksi",body:Q,style:{width:"120px"}})]})]}),e.jsx(k,{header:"Edit Nama Kamar",visible:B,style:{width:"450px"},onHide:()=>p(!1),footer:e.jsxs("div",{children:[e.jsx(l,{label:"Batal",className:"p-button-text",onClick:()=>p(!1)}),e.jsx(l,{label:"Simpan",className:"p-button-success",onClick:z,disabled:!f.trim()})]}),children:e.jsx("div",{className:"flex flex-col gap-4 pt-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Nama Kamar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ne,{value:f,onChange:a=>U(a.target.value),placeholder:"Contoh: Kamar 1",className:"w-full",autoFocus:!0})]})})}),e.jsx(k,{header:`Tambah Peserta ke ${s.name}`,visible:T,style:{width:"600px",maxHeight:"80vh"},onHide:()=>g(!1),footer:e.jsxs("div",{children:[e.jsx(l,{label:"Batal",className:"p-button-text",onClick:()=>g(!1)}),e.jsx(l,{label:`Tambahkan ${o.length} Peserta`,className:"p-button-success",onClick:H,disabled:o.length===0})]}),children:e.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsxs("strong",{children:[i.length," orang"]})," sudah berada di kamar ini"]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto rounded-lg border border-gray-200",children:c.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Tidak ada peserta yang belum terplotting"}):c.map(a=>e.jsxs("div",{className:`flex cursor-pointer items-center gap-3 border-b border-gray-100 p-3 hover:bg-gray-50 ${o.includes(a.id)?"bg-emerald-50":""}`,onClick:()=>{o.includes(a.id)?y(o.filter(n=>n!==a.id)):y([...o,a.id])},children:[e.jsx("input",{type:"checkbox",checked:o.includes(a.id),onChange:()=>{},className:"h-4 w-4"}),e.jsx(C,{label:a.name.charAt(0),size:"normal",shape:"circle",className:"bg-emerald-600 text-white"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:a.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a.office.name," • ",a.employment.name]})]})]},a.id))})]})}),e.jsx(k,{header:x?`Pindahkan ${x.name}`:`Pindahkan ${t.length} Peserta`,visible:D,style:{width:"500px"},onHide:()=>h(!1),footer:e.jsxs("div",{children:[e.jsx(l,{label:"Batal",className:"p-button-text",onClick:()=>h(!1)}),e.jsx(l,{label:"Pindahkan",className:"p-button-info",onClick:x?E:I,disabled:!r})]}),children:e.jsxs("div",{className:"flex flex-col gap-4 pt-4",children:[e.jsx("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Dari:"})," ",s.building.name," - ",s.name]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:["Pindah ke Kamar ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(te,{value:r,options:Y,onChange:a=>N(a.value),placeholder:"Pilih kamar tujuan",className:"w-full",filter:!0})]}),r&&e.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["Kamar tujuan dipilih:"," ",e.jsxs("strong",{children:[r.building.name," - ",r.name]})]})})]})})]})};export{Te as default};
